# Copyright (c) 2001-2003
#	Fraunhofer Institute for Open Communication Systems (FhG Fokus).
#	All rights reserved.
#
# Author: Harti Brandt <harti@freebsd.org>
#
# $Begemot: bsnmp/tags/RELENG_1_13/Makefile.in 2238 2018-06-27 14:58:50Z brandt_h $
#

SUBDIR=	gensnmptree lib snmpd

ifeq "$(BUILD_MODULES)" "yes"
SUBDIR+= snmp_mibII snmp_ntp snmp_target snmp_usm snmp_vacm
endif

ifeq "$(HAVE_LIBSMI)" "yes"
SUBDIR += gensnmpdef
endif

PKGFILES=libbsnmp.pc
PKGFILESDIR= ${prefix}/libdata/pkgconfig

all:
	+@for f in $(SUBDIR) ; do			\
		echo "==> $$f" ;			\
		if ! $(MAKE) -C $$f all ; then	\
			break ;				\
		fi ;					\
	done

install:
	+@for f in $(SUBDIR) ; do			\
		echo "==> $$f" ;			\
		if ! $(SUBMAKE) -C $$f install ; then	\
			break ;				\
		fi ;					\
	done
	@$(srcdir)/config/mkinstalldirs $(PKGFILESDIR)
	for f in $(PKGFILES) ; do \
		$(BSD_INSTALL_DATA) $(builddir)/$$f $(PKGFILESDIR) ; \
	done

clean:
	+@for f in $(SUBDIR) ; do			\
		echo "==> $$f" ;			\
		if ! $(SUBMAKE) -C $$f clean ; then	\
			break ;				\
		fi ;					\
	done
	-rm -f $(PKGFILES)
