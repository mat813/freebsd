<!--
    FreeBSD Japanese Documentation Project

    $FreeBSD$

    Original revision: 1.22.2.124
-->

<articleinfo>
  <title>&os;/&arch; &release.current; リリースノート</title>

  <pubdate>$FreeBSD$</pubdate>
  
  <corpauthor>FreeBSD プロジェクト</corpauthor>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <holder role="mailto:doc@FreeBSD.org">FreeBSD ドキュメンテーションプロジェクト</holder>
  </copyright>

  <abstract>
    <para>この &os; &release.current; リリースノートには,
      &os; &release.prev; のリリース以降に &os;
      ベースシステムに対して加えられた変更点がまとめられています.
      変更点はカーネル, ユーザランドにおけるものだけでなく,
      前回のリリース以降に発行され, 影響のあるセキュリティ勧告も含まれています.
      また, アップグレードの際の注意点についても簡単に説明しています.</para>
  </abstract>
</articleinfo>

<sect1>
  <title>はじめに</title>

  <para>この文書は &arch.print; アーキテクチャ版 &os; &release.current;
    のリリースノートです.
    これには &release.prev; 以降に追加 (変更)
    された新機能および, 前のバージョンの &os;
    からアップグレードする場合におけるいくつかの注意点か書かれています.</para>

<![ %release.type.snapshot [

  <para>リリースノートが対象としているこの &release.type; は,
    &release.branch; 開発ブランチの
    &release.prev; と, リリースが予定されている
    &release.next; の中間点に対応します.
    このブランチにおける構築済みのバイナリ &release.type;
    は <ulink url="&release.url;"></ulink> から入手可能です.</para>

]]>

<![ %release.type.release [

  <para>この &os; &release.current は &release.type; 版であり,
    <ulink url="&release.url;"></ulink>
    および各ミラーサイトで公開されています.
    &os; の &release.type; 版 (またはそれ以外) の入手法については
    <ulink url="http://www.FreeBSD.org/handbook/">FreeBSD
      ハンドブック</ulink>の<ulink url="http://www.FreeBSD.org/handbook/mirrors.html">付録
      <quote>&os; を入手するには</quote></ulink>をご覧ください.</para>

]]>
</sect1>

<!--
       The "What's New" section of the release notes.  

       Guidelines for new entries:

       1.  If there is some obvious "keyword" associated with an
       entry (such as a manpage entry or an application name), try to
       put it at the start of the sentence.

       2.  Within each subsection (i.e. kernel, security, userland),
       list items in alphabetical order by these keywords.

-->

<sect1>
  <title>更新情報</title>

  <para>この節では &release.prev; 以降に新たに追加・変更された
    ユーザに影響する機能について説明します.
    リリースノートの項目には通常, 新しいドライバや新しいハードウェアへの対応,
    新しいコマンドや新しいオプションの導入,
    大規模なバグ修正, 寄贈ソフトウェアのアップグレードが含まれており,
    それに加えて
    &release.prev; 以降に発行されたセキュリティ勧告も記載されています.</para>

  <para>&os; に加えられた変更点のうち,
    スペースの都合上ここに書かれていないものも多数存在します.
    それらはたとえば文書の修正や改良, ごく影響の小さいバグの修正,
    監査で見つかったセキュリティ上好ましくないスタイルで書かれたコードの修正,
    ソースコードの整理などです.</para>

  <para>リリースノートの項目は, 大きく三つの節から構成されています.
    まず <xref linkend="kernel"> には &os;
    カーネルに加えられた最新の変更点が書かれています.
    そして <xref linkend="security">
    にはセキュリティ勧告を含むセキュリティ上の修正が,
    最後の <xref linkend="userland"> には &os;
    のベースシステムに含まれているユーザランドアプリケーションの
    変更点がまとめられています.</para>

  <sect2 id="kernel">
    <title>カーネルの変更点</title>

    <para arch="i386">&man.amdpm.4; ドライバが追加されました.
      これは AMD 756 チップセットのシステム監視機能へのアクセスを提供します.</para>

    <para arch="i386">&man.loader.8; に新しく
      <application>bzip2</application>
      で圧縮されたカーネルやモジュールをロードする機能が追加されました
      (ただしこれはオプション機能であり, コンパイル時に有効化する必要があります.
      また, 標準では無効になっています).</para>

    <para arch="i386">pmc ドライバが追加されました.
      これは NEC PC-98NOTE の電源管理コントローラに対応しています.</para>

    <para arch="i386">カーネルのロードアドレスがシンボルテーブルに格納されるようになり,
      ハードコードされたさまざまな定数が削除されました.
      これにより, 異なるアドレスでコンパイルされたカーネルに対しても
      &man.ps.1; が正しく動作可能になっています.</para>

    <para>巨大なプロセス (あるいは非常に多数のプロセス) のコアダンプの際に,
      長い間マシンが停止してしまう症状が起こらなくなりました.</para>

    <para arch="i386">
      カーネルの状態を保持するためにプロセスごとに割り当てられるメモリページの数が
      2 から 3 に増加しました.  これにより, カーネルスタックのオーバフロー
      (および, その後ろにあるプロセス固有のデータ構造体の破壊)
      の発生が起こりにくくなっています.</para>

    <para arch="i386">新しいカーネルオプション
      <varname>KVA_SPACE</varname> が追加されました.
      これは, カーネルの仮想アドレス空間の大きさを再設定できるようにするためのものです.</para>

    <para arch="alpha"><varname>hw.physmem</varname>
      環境変数に加えて <varname>MAXMEM</varname>
      カーネルオプションが追加されました.
      これは試験目的などに利用されるもので,
      マシンに搭載されているメモリサイズを人為的に減らすことができます.</para>

    <para arch="alpha">コンソールドライバが TGA
      ベースのディスプレイアダプタに対応しました.</para>

    <para>カーネルの設定パラメータ
      <varname>MAXTSIZ</varname>, <varname>DFLDSIZ</varname>,
      <varname>MAXDSIZ</varname>, <varname>DFLSSIZ</varname>,
      <varname>MAXSSIZ</varname>, <varname>SGROWSIZ</varname> は,
      すべてローダからも設定することが可能になりました.</para>

    <sect3>
      <title>プロセッサ・マザーボードの対応状況</title>

      <para></para>
    </sect3>
    
    <sect3>
      <title>ネットワークインターフェイスの対応状況</title>
      
      <para>&man.an.4; ドライバが新しく <quote>monitor</quote>
        モードに対応しました.  &man.ancontrol.8; に
        <option>-M</option> オプションを指定することで,
        このモードに設定することが可能です.</para>

      <para arch="i386">
        &man.bge.4; ドライバが追加されました.
        これは 3Com 3c996-T,
        SysKonnect SK-9D21, SK-9D41 および
        Dell PowerEdge 2550 サーバの内蔵ギガビットイーサネット NIC
        などに使われている Broadcom BCM570x
        ファミリのギガビットイーサネットコントローラ用ドライバで,
        TCP/IP チェックサムのオフロード,
        ジャンボフレーム, VLAN タグ挿入・削除機能に加え,
        割り込み低減機能に対応しています.</para>

      <para>&man.de.4;
        ドライバは従来の受信ユニットに優先度を与えるという方式ではなく,
        21143 の送受信ユニット間でラウンドロビンの調停を行なうようになりました.
        これにより, 高負荷時の転送速度において 10&ndash;15%
        程度の性能向上が達成されています.</para>

      <para>&man.fxp.4; ドライバが新しく Intel
        のロード可能マイクロコードに対応しました.
        これにより受信側の割り込みコーリス機能 (訳注: interrupt coalescing;
        割り込みの取りこぼしを防ぐ機能) やパケット結合機能など,
        NIC が対応している機能を利用できるようになります.
        この機能は &man.ifconfig.8; に <option>link0</option>
        オプションを指定することで有効になります.</para>

      <para>dgm ドライバが &os; -CURRENT の変更を受けて更新されました.</para>

      <para>&man.xl.4; ドライバが新しく,
        送信側・受信側双方における TCP/IP チェックサムのオフロード機能に対応しました.
        これは, この機能に対応している 3C905B, 3C905C, 3C980C などの
        NIC に対して有効です.</para>
    </sect3>

    <sect3>
      <title>ネットワークプロトコル</title>

      <para>&man.bridge.4; および &man.dummynet.4;
        に対していくつかバグ修正が行なわれ,
        ロード可能モジュールとして利用できるようになりました.</para>
    </sect3>

    <sect3>
      <title>ディスク・記憶装置</title>

      <para>&man.aac.4; ドライバが &os; -CURRENT の変更を受けて更新されました.
        この更新には, アダプタの発行するコマンドの正しい処理,
        ディスクデバイスの脱着, クラッシュダンプ機能, CLI 管理に必要な
        &man.ioctl.2; コマンドの追加が含まれています.</para>

      <para>新しく &man.isp.4; ドライバが追加されました.
        これは Qlogic 2300, 2312 Optical Fibre Channel PCI
        カードに対応しています.</para>
    </sect3>

    <sect3>
      <title>ファイルシステム</title>

      <para>FFS のディレクトリレイアウト優先アルゴリズム
        (the directory layout preference algorithm) が,
        規模の大きいファイルシステムに対して速度が向上するように変更されました.</para>

      <para>仮想メモリサブシステムは,
        標準で UFS ディレクトリメモリ要求を利用するようになりました
        (この動作は sysctl 変数 <varname>vfs.vmiodirenable</varname>
        で制御することが可能です).</para>
    </sect3>

    <sect3>
      <title>PCCARD 対応状況</title>

      <para></para>
    </sect3>

    <sect3>
      <title>マルチメディアへの対応状況</title>
      
      <para>MP3 プレーヤ Diamond Rio シリーズ用の
        &man.urio.4; ドライバが新しく追加されました
        (このドライバのマニュアルページだけはなぜか
        &os; 4.3-RELEASEは に追加されていました).</para>
    </sect3>

    <sect3>
      <title>寄贈ソフトウェア</title>

      <para></para>
    </sect3>
  </sect2>

  <sect2 id="security">
    <title>セキュリティ関連の修正</title>

    <para>&os; &release.prev; では,
      バグによるセキュリティホールを避けるために
      ユーザごとにある <filename>~/.login.conf</filename> ファイルは
      無効になっていましたが, バグが修正されたため,
      現在はこの機能が有効になっています.</para>

  </sect2>

  <sect2 id="userland">
    <title>ユーザランドの変更点</title>

    <para>&man.arp.8; が,
      各 ARP エントリに対応するインターフェイス名を表示するようになりました.</para>

    <para>&man.cat.1; が新しく UNIX ドメインソケットの読み出しに対応しました.</para>

    <para arch="i386"><filename>compat4x</filename> 互換機能の配布に
      含まれる <filename>libcrypto.so.1</filename> と
      <filename>libssl.so.1</filename> が,
      <filename>librsaUSA.so</filename> および
      <filename>librsaINTL.so</filename> ライブラリに依存しないものになりました.
      この変更により, &os; 4.1-RELEASE 以前の &os;
      向けに構築されたバイナリに対する互換性が向上しています.</para>

    <para>&man.find.1; のオプション <option>-[acm]time</option> において,
      さまざまな時間単位が使えるようになりました.</para>

    <para>&man.fmt.1; が書き直されました.  この書き換えにより,
      以前のものに含まれていた多数のバグが修正されています.</para>

    <para>&man.ipfw.8; は,
      標準で動的なファイアウォールルールを表示しないようになりました.
      動的なルールは <option>-d</option> オプションを指定すると表示されます.
      また, <option>-e</option> オプションは,
      無効になった動的なルールを表示します.</para>

    <para>&man.ipfw.8; に新しいファイアウォールルール <literal>limit</literal>
      が追加されました.
      これはアドレス・ペアの間のセション数を制限するためのものです.</para>

    <para>&man.keyinfo.1; が Perl スクリプトではなく,
      C プログラムになりました.</para>

    <para><filename>libstand</filename> が新しく,
      <application>bzip2</application>
      で圧縮されたファイルが含まれるファイルシステムに対応しました.</para>

    <para>&man.lpd.8; の制御ファイルに新しく,
      <literal>o</literal> という型のプリントファイル動作指定が追加されました.
      これは <application>MacOS</application> 10.1
      で生成した PostScript ファイルを印刷に対応したものです.</para>
    
    <para>&man.netstat.1; に, 統計情報をリセットする新しいオプション
      <option>-z</option> が追加されました.</para>
    
    <para>&man.netstat.1; に, アドレスを数字で,
      ポート番号をシンボルで表示する新しいオプション
      <option>-S</option> が追加されました.</para>

    <para>&man.newfs.8; の設定に含まれる
      1 グループに対するシリンダ数 (cylinders/group) の標準が,
      現在のファイルシステムパラメータに設定可能な最大値に設定されるように
      なりました.  以前はこの標準値が 16 に固定されており,
      現在は <option>-c</option> オプションで値を設定することが可能になっています.
      この変更には, &man.fsck.8; の性能向上と断片化 (fragmentation)
      の低減という効果があります.</para>

    <para>新しく行番号フィルタプログラム &man.nl.1; が追加されました.</para>    

    <para>&man.ping.8; に新しいオプション <option>-A</option> が追加されました.
      これは, パケットが失われた時にビープ音が鳴るようにするものです.</para>

    <para>&man.route.8; で間接経路を変更する際,
      変更後の経路が gateway
      経路と同じ場合により多くの情報を表示するようになりました.</para>

    <para>&man.route.8; が
      <literal><replaceable>net</replaceable>/<replaceable>bits</replaceable></literal>
      ではない新しい記法
      <literal><replaceable>host</replaceable>/<replaceable>bits</replaceable></literal>
      に対応しました.  これは &man.netstat.1; と互換性を高めるためのものです.</para>

    <para>&man.route.8; が <quote>プロキシ専用</quote> の
      published ARP エントリを作成できるようになりました.</para>

    <para>&man.sysinstall.8; に対して, インストール中に KLD
      をロードする機能が新しく追加されました.</para>

    <para>&man.syslogd.8; に新しく,
      利用可能なすべてのアドレスを使うのではなく,
      指定アドレスのみに bind する機能が追加されました.
      有効にするには
      <option>-b</option> オプションを使います.</para>

    <para>従来 &man.vnconfig.8; に <option>-f</option>
      オプションを指定した場合は 16
      デバイスまでしか設定することができませんでしたが,
      この制限がなくなりました.</para>

    <para>&man.wall.1; に新しいオプション <option>-g</option>
      が追加されました.
      これは指定されたグループのユーザすべてにメッセージを送ります.</para>
 
    <sect3>
      <title>寄贈ソフトウェア</title>

      <para><application>OpenSSH</application> が
        バージョン 2.9 に更新されました.
        これには新しい 2 つのプログラム &man.sftp.1;
        &man.ssh-keyscan.1; が含まれています.
        また, 既存の SSH セションの暗号鍵変更や
        &man.ssh-agent.1; が新たに DSA 暗号鍵の転送に対応したこと,
        実験的な <application>SOCKS4</application> プロキシ機能といった
        さまざまな改良が &man.ssh.1; に追加されています.

        <note>
         <para><filename>/etc/ssh/ssh_config</filename> の標準設定は
            <literal>Protocol 1,2</literal> のままになっています.
            &os; -CURRENT の標準設定は
            <literal>Protocol 2,1</literal> です.</para>
       </note>
      </para>

      <para><application>tcsh</application> がバージョン 6.11 に更新されました.</para>

      <sect4>
        <title>CVS</title>
        
        <para><application>CVS</application> がバージョン
          1.11.1p1 に更新されました.</para>

        <para>&man.cvs.1; に新しいオプション <option>-T</option> が追加されました.
          これはリポジトリから砂場 (sandbox) にある <filename>CVS/Template</filename>
          ファイルを更新するためのものです.</para>
        
        <para>&man.cvs.1; <literal>diff</literal> に新しいオプション
          <option>-j</option> が追加されました.
          これはブランチタグのリビジョンとの比較を実現します.</para>
      </sect4>
    </sect3>
    
    <sect3>
      <title>Ports/Packages Collection</title>

      <para>&man.pkg.create.1; に新しく <option>-b</option>
        オプションが追加されました.
        これはローカルにインストールされた package
        から package ファイルを生成します.</para>
    </sect3>
  </sect2>
</sect1>

<sect1>
  <title>以前の &os; リリース版からのアップグレード</title>

  <para>以前の &os; リリース版からのアップグレードを行なうには,
    主に次の 3 つの方法があります.</para>

  <itemizedlist>
    <listitem>
      <para>&man.sysinstall.8; のバイナリアップグレード機能を使う方法.
        おそらくこの方法が最も時間のかからない方法なのですが,
        これは &os; のインストール時に
        特別なコンパイルオプションを指定していないことを前提としています.</para>
    </listitem>
    
    <listitem>
      <para>&os; を完全に再インストールする方法.
        技術的にはアップグレード手段の一つとは言えませんし,
        <filename>/etc</filename>
        の内容を手動で退避・復元したりする必要があるなど,
        大抵の場合はバイナリアップグレード機能を使うより手間がかかります.
        しかし, ディスクのパーティション分割を変更したい (とか,
        変更しなければならない) 場合などには便利な方法でしょう.</para>
    </listitem>
    
    <listitem>
      <para><filename>/usr/src</filename> のソースコードから構築する方法.
        この手段は非常に柔軟な対応が可能ですが,
        ディスク空間と時間, そして専門的なノウハウを必要とします.
        また, 非常に古いバージョンの &os;
        からのアップグレードは問題が発生することが多いため,
        そのような場合にはバイナリアップグレード,
        もしくは完全な再インストールを行なった方が効果的でしょう.</para>
    </listitem>
  </itemizedlist>
  
  <para>なるべくアップグレードを始める前に詳細について
    <filename>INSTALL.TXT</filename> をご覧ください.
    ソースからアップグレードする場合は
    <filename>/usr/src/UPDATING</filename> にも目を通す必要があります.</para>

  <para>最後になりますが, &os; の -STABLE もしくは -CURRENT
    ブランチを追いかけるために用意された手段の一つをとりたいと考えているなら,
    <ulink url="http://www.FreeBSD.org/handbook/">FreeBSD
      ハンドブック</ulink>の
    <ulink url="http://www.FreeBSD.org/handbook/current-stable.html"><quote>-CURRENT
        vs. -STABLE</quote></ulink> の節をご覧になるようお願いします.</para>

  <important>
    <para>もちろん言うまでもないことですが,
      &os; のアップグレードは, データと設定ファイルを
      <emphasis>すべて</emphasis>退避させた後に行なうべきです.</para>
  </important>
</sect1>
