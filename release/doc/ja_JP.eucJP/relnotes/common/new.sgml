<!--
    FreeBSD Japanese Documentation Project

    $FreeBSD$

    Original revision: 1.22.2.384
-->

<articleinfo>
  <title>&os;/&arch; &release.current; リリースノート</title>

  <pubdate>$FreeBSD$</pubdate>

  <corpauthor>FreeBSD プロジェクト</corpauthor>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <year>2003</year>
    <holder role="mailto:doc@FreeBSD.org">FreeBSD ドキュメンテーションプロジェクト</holder>
  </copyright>

  <abstract>
    <para>この &os; &release.current; リリースノートには、
      &os; &release.prev; のリリース以降に &os;
      ベースシステムに対して加えられた変更点がまとめられています。
      変更点はカーネル、ユーザランドにおけるものだけでなく、
      前回のリリース以降に発行され、
      ベースシステムに影響のあるセキュリティ勧告も含まれています。
      また、アップグレードの際の注意点についても簡単に説明しています。</para>
  </abstract>
</articleinfo>

<sect1 id="intro">
  <title>はじめに</title>

  <para>この文書は &arch.print; アーキテクチャ版 &os; &release.current;
    のリリースノートです。
    これには &release.prev; 以降に追加 (変更)
    された新機能および、前のバージョンの &os;
    からアップグレードする場合におけるいくつかの注意点か書かれています。</para>

<![ %release.type.snapshot [

  <para>リリースノートが対象としているこの &release.type; は、
    &release.branch; 開発ブランチの
    &release.prev; と、リリースが予定されている
    &release.next; の中間点に対応します。
    このブランチにおける構築済みのバイナリ &release.type;
    は <ulink url="&release.url;"></ulink> から入手可能です。</para>

]]>

<![ %release.type.release [

  <para>この &os; &release.current は &release.type; 版であり、
    <ulink url="&release.url;"></ulink>
    および各ミラーサイトで公開されています。
    &os; の &release.type; 版 (またはそれ以外) の入手法については
    <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
      ハンドブック</ulink>の<ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors.html">
      <quote>&os; を入手するには</quote></ulink>をご覧ください。</para>

]]>
</sect1>

<!--
       The "What's New" section of the release notes.

       Guidelines for new entries:

       1.  If there is some obvious "keyword" associated with an
       entry (such as a manpage entry or an application name), try to
       put it at the start of the sentence.

       2.  Within each subsection (i.e. kernel, security, userland),
       list items in alphabetical order by these keywords.

       Some entries will have no obvious keywords to help with
       ordering.  In sections containing these entries, put those
       containing (e.g.) manpage references first, then some
       suitable SGML comment line as a demarc, then the remaining
       entries.
-->

<sect1 id="new">
  <title>更新情報</title>

  <para>この節では &release.prev; 以降に新たに追加・変更された
    ユーザに影響する機能について説明します。
    リリースノートの項目には通常、新しいドライバや新しいハードウェアへの対応、
    新しいコマンドや新しいオプションの導入、
    大規模なバグ修正、寄贈ソフトウェアのアップグレードが含まれており、
    それに加えて
    &release.prev; 以降に発行され、
    ベースシステムに影響のあるセキュリティ勧告も記載されています。</para>

  <sect2 id="security">
    <title>セキュリティ勧告</title>

    <para><application>sendmail</application> にあった
      リモートから悪用可能なバッファオーバフロー問題が修正されました。
      問題の詳細は、セキュリティ勧告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:07.sendmail.asc">FreeBSD-SA-03:07</ulink>
      をご覧ください。
      問題を修正するために、&os; &release.prev; では
      ベンダの提供している修正パッチを適用しました
      (直前だったため、リリースノートには記載されていません)。
      &os; &release.current; では、新しい
      <application>sendmail</application>
      を統合することで問題の修正を行なっています。</para>

    <para>&man.realpath.3; 関数の実装にあった
      1 バイトのバッファオーバフローを引き起こすバグが修正されました。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:08.realpath.asc">FreeBSD-SA-03:08</ulink>
      をご覧ください。</para>

    <para>カーネルに不正なシグナルの配送を可能にするバグが修正されました。
      このバグは、カーネルパニックを引き起こす可能性があります。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:09.signal.asc">FreeBSD-SA-03:09</ulink>
      をご覧ください。</para>

    <para>カーネルメモリの内容が漏洩する可能性がある
      iBCS2 エミュレーションモジュールのバグが修正されました。
      なお、このモジュールはデフォルトでは有効になっていません。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:10.ibcs2.asc">FreeBSD-SA-03:10</ulink>
      をご覧ください。</para>

    <para><application>sendmail</application> の
      <quote>DNS マップ</quote> 機能の実装にプログラミング上の誤りがあり、
      新しいバージョンの <application>sendmail</application>
      を統合して修正されました。
      ただし、&os; のデフォルトの設定ではこの機能は使用していません。
      詳細はセキュリティ勧告 <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:11.sendmail.asc">FreeBSD-SA-03:11</ulink>
      をご覧ください。</para>

    <para><application>OpenSSH</application> のバッファを管理する
      コードにあったクラッシュを引き起こす可能性があるバグが修正されました。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:12.openssh.asc">FreeBSD-SA-03:12</ulink>
      をご覧ください。</para>

    <para><application>sendmail</application>
      のバッファオーバフロー問題が修正されました。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:13.sendmail.asc">FreeBSD-SA-03:13</ulink>
      をご覧ください。</para>

    <para>ARP キャッシュコードにあった、カーネル資源を枯渇させ、
      システムパニックを発生させる可能性があるバグが修正されました。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:14.arp.asc">FreeBSD-SA-03:14</ulink>
      をご覧ください。</para>

    <para><application>OpenSSH</application> の
      PAM チャレンジ/認証サブシステムにあったいくつかの誤りが修正されました。
      これらのバグの影響はその誤りによって異なります。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:15.openssh.asc">FreeBSD-SA-03:15</ulink>
      をご覧ください。</para>

    <para>システムがクラッシュしたり、高い権限を獲得できる可能性がある
      readv(2) システムコールの実装上のバグが修正されました。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:16.filedesc.asc">FreeBSD-SA-03:16</ulink>
      をご覧ください。</para>

    <para>カーネルメモリの内容が漏洩する可能性がある
      &man.procfs.5; と &man.linprocfs.5; の実装上のバグが修正されました。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:17.procfs.asc">FreeBSD-SA-03:17</ulink>
      をご覧ください。</para>

    <para><application>OpenSSL</application> に
      独立したセキュリティ上の弱点が四つあり、修正されました。
      このバグには、リモートの攻撃者が <application>OpenSSL</application>
      を利用するアプリケーションをクラッシュさせたり、
      アプリケーションの権限で任意のコードを実行できる可能性があります。
      詳細はセキュリティ勧告
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:18.openssl.asc">FreeBSD-SA-03:18</ulink>
      をご覧ください。</para>

  </sect2>

  <sect2 id="kernel">
    <title>カーネルの変更点</title>

    <para arch="i386">コンソールを初期化する際に、
      AT キーボードが接続されていない時でも
      &man.atkbd.4; が AT キーボードを登録してしまうバグが修正されました。
      これにより、USB キーボードのみが接続されているシステムで
      <command>kbdcontrol -k /dev/kbd1</command>
      を実行する必要はなくなっています。</para>

    <para arch="i386,pc98">&man.safe.4; ドライバが追加されました。
      これは SafeNet 1141、1741 ベースの
      暗号処理アクセラレータに対応しています。

      <warning>
	<para>このドライバは試験的なものと考えるべきであり、
	  使用には注意を払ってください。</para>
      </warning>

      <note>
	<para>公開鍵暗号処理には対応していません。</para>
      </note></para>

<!-- Above this line, kernel changes ordered by manpage/variable name -->

    <sect3 id="proc">
      <title>プラットフォーム固有のハードウェアの対応状況</title>

      <para arch="i386">Intel 80386
        プロセッサでカーネルが起動しないというバグが修正されました。</para>

      <para arch="i386">Intel Pentium Pro 以降に搭載されている
	Physical Address Extensions (PAE) 機能に対応しました。
	これは、一つのマシン上で最大 64GB の
	RAM を使用することができるようになる機能ですが、
	一つのプロセス (と FreeBSD カーネル) が使える
	メモリ量は従来のままです。</para>
    </sect3>

    <sect3 id="boot">
      <title>起動ローダの変更</title>

      <para></para>

<!-- Above this line, order boot loader changes by manpage/variable name-->

    </sect3>

    <sect3 id="net-if">
      <title>ネットワークインターフェイスの対応状況</title>

      <para>&man.bge.4; が Broadcom 5705 ベースの
	Gigabit Ethernet NIC に対応しました。</para>

      <para>&man.dc.4; ドライバが Davicom DC9102 カードで再び
	パケットを適切に送出するようになりました。</para>

      <para>proatm ドライバが新しく追加されました。
	これは、IDT77252 ベースの ProSum ProATM インタフェースに対応しています。
	このドライバは &os;-CURRENT の patm ドライバに相当します。</para>

      <para arch="i386">&man.rue.4; ドライバが追加されました。
	これは RealTek RTL8150 USB to Fast Ethernet
	コントローラチップをベースにした Ethernet アダプタに対応しています。</para>

      <para arch="i386">&man.sbsh.4; ドライバが追加されました。
	Granch SBNI16 SHDSL モデムに対応しています。</para>

      <para>&man.sk.4; ドライバが SK-9521 V2.0 と 3COM 3C940 ベースの
	Gigabit Ethernet NIC に対応しました。</para>

      <para>&man.wi.4; ドライバのサスペンド/レジューム対応が
	デバイスを非動作状態にした時も正しく動作するようになりました。</para>

<!-- Above this line, order network driver changes by manpage/variable name-->

    </sect3>

    <sect3 id="net-proto">
      <title>ネットワークプロトコル</title>

      <para>&man.ipfw.4; ルールに、カンマで区切られたアドレスリスト
        (たとえば <literal>1.2.3.4, 5.6.7.8/30, 9.10.11.12/22</literal>)
        が使用できるようになりました。また、可読性を向上させるため、
        カンマの後ろに空白文字を入れることも可能になっています。</para>

      <para>&man.ipfw.4; ルールに、C++ 風のコメントが書けるようになりました。
        各コメントはルールと同じ場所に格納され、
        &man.ipfw.8; <literal>show</literal>
        コマンドでルールと一緒に表示させることができます。</para>

      <para>&man.ipfw.8; を使って、ルールセット 31 にある
        &man.ipfw.4; ルールが変更できるようになりました。
        従来のルールセット 31 は、デフォルトのルールを格納するために
        使われる読みとり専用のルールセットでしたが、
        この変更により <command>ipfw delete set 31</command> という
        コマンドを使って、ルールセット 31 を削除することができるようになっています。
        ただし、このルールセットは <command>ipfw flush</command>
        コマンドでは削除されません。つまり、このルールセットを使うと、
        一種の <quote>永続ルール</quote> を記述することが可能になります。
        詳細については、&man.ipfw.8; に書かれています。</para>

      <para>カーネルが
	Protocol Independent Multicast ルーティングに対応しました。</para>

    </sect3>

    <sect3 id="disks">
      <title>ディスク・記憶装置</title>

      <para>&man.da.4; ドライバが、USB デバイスと Firewire デバイスに
	6 バイトコマンドを送出しないようになりました。
	USB デバイスを動作させるための
	quirk は現在は不要であり、無効にされています。
	従来の挙動に戻すには、<literal>options DA_OLD_QUIRKS</literal> を
	カーネルコンフィグレーションファイルに追加してください。

      <para>&man.twe.4; ドライバが 3ware 汎用 API に対応しました。</para>
    </sect3>

    <sect3 id="fs">
      <title>ファイルシステム</title>

      <para>新しく <literal>DIRECTIO</literal>
        カーネルオプションが追加されました。
        これはバッファキャッシュを経由せずに直接データを読み込んだり、
        ユーザ空間のバッファに直接データを書き込むことを可能にします。
        この機能を使うには、ファイル記述子に
        <literal>O_DIRECT</literal> フラグをセットすることと、
        読み出し操作時のオフセット・データ長の両方に、
        物理メディアセクタ長の整数倍を指定する必要があります。</para>

    </sect3>

    <sect3 id="pccard">
      <title>PCCARD 対応状況</title>

      <para></para>

    </sect3>

    <sect3 id="mm">
      <title>マルチメディアへの対応状況</title>

      <para></para>

    </sect3>
  </sect2>

  <sect2 id="userland">
    <title>ユーザランドの変更点</title>

    <para>&man.arp.8; に、ARP エントリに対する操作の影響範囲を
      特定のインタフェースに限定する <option>-i</option>
      オプションが追加されました。このオプションは、
      情報を表示させる操作にのみ適用されます。多くのインタフェースを
      搭載したルータなどに有用なオプションです。</para>

    <para>&man.chroot.8; が、chroot 環境で使うユーザとプライマリグループ、
      グループリストの設定に対応しました。
      設定にはそれぞれ、<option>-u</option>, <option>-g</option>,
      <option>-G</option> オプションを使います。</para>

    <para>&man.ipfw.8; <literal>list</literal> および <literal>show</literal>
      コマンドで、ルール番号を範囲で指定することができるようになりました。</para>

    <para>&man.ipfw.8; に、実際の動作を行なわずにコマンドの文法だけをチェックする
      <option>-n</option> フラグが追加されました。</para>

    <para>&man.mount.msdosfs.8; ユーティリティに、
      ファイルシステム中のディレクトリの最大ファイルパーミションを指定する
      <option>-M</option> オプションが追加されました。</para>

    <para>&man.systat.1; が
      IPv6 および ICMPv6 のトラフィックを表示するようになりました。</para>

    <para>&man.uudecode.1; と &man.b64decode.1; に、
      先頭フレーム行、もしくは最終フレーム行が欠けた、
      壊れたファイルをデコードするための
      <option>-r</option> フラグが追加されました。</para>

<!-- Above this line, order userland changes by manpage/variable name-->

  </sect2>

  <sect2 id="contrib">
    <title>寄贈ソフトウェア</title>

    <para arch="i386">Intel の ACPI 配布物のバージョン 20030228 が
      (&os; ローカルの変更と対応コードとともに) 統合されました。
      この機能は試験的なものと考えるべきであり、
      製品環境への展開には事前に検証を行うべきです。

      <note>
	<para>&os;-CURRENT とは異なり、カーネルモジュール形式の
	  ACPI ドライバはありません。
	  カーネルコンフィグファイルに、明示的に
	  <literal>device acpica</literal>
	  を追加して、カーネルに静的に組み込む必要があります。
	  このドライバは、デフォルトでは <filename>GENERIC</filename>
	  カーネルに含まれていません。</para>
      </note></para>

    <para><application>groff</application> がバージョン
      1.18.1 からバージョン 1.19 に更新されました。</para>

    <para><application>lukemftpd</application> がバージョン 1.2beta1
      から、NetBSD CVS リポジトリ由来の 2003 年 1 月 5
      日時点のスナップショットに更新されました
      (デフォルトでは構築されません)。</para>

    <para><application>sendmail</application> がバージョン
      8.12.9 に更新されました。</para>

    <para><application>texinfo</application> がバージョン 4.5
      からバージョン 4.6 に更新されました。</para>

    <para>timezone データベースが
      <filename>tzdata2002d</filename> から
      <filename>tzdata2003a</filename> に更新されました。</para>
  </sect2>

  <sect2 id="ports">
    <title>Ports/Packages Collection</title>

    <para>&man.pkg.create.1; に新しく
      <option>-C</option> オプションが追加されました。
      これは作成する package と機能が衝突する package のリストを登録します。
      このリストにある package がすでに存在している場合、
      (&man.pkg.add.1; での) インストールが失敗します。
      この衝突チェックは、&man.pkg.add.1; に
      <option>-f</option> フラグを追加して無効にすることができます。</para>

  </sect2>

  <sect2 id="releng">
    <title>リリースエンジニアリングと統合</title>

    <para><application>GNOME</application> 対応リリースが
      2.2 から 2.4 に更新されました。</para>

    <para><application>KDE</application> 対応リリースが
      3.1 から 3.1.4 に更新されました。</para>
  </sect2>
</sect1>

<sect1 id="upgrade">
  <title>以前の &os; リリース版からのアップグレード</title>

  <para>以前の &os; リリース版からのアップグレードを行なうには、
    主に次の 3 つの方法があります。</para>

  <itemizedlist>
    <listitem>
      <para>&man.sysinstall.8; のバイナリアップグレード機能を使う方法。
        おそらくこの方法が最も時間のかからない方法なのですが、
        これは &os; のインストール時に
        特別なコンパイルオプションを指定していないことを前提としています。</para>
    </listitem>

    <listitem>
      <para>&os; を完全に再インストールする方法。
        技術的にはアップグレード手段の一つとは言えませんし、
        <filename>/etc</filename>
        の内容を手動で退避・復元したりする必要があるなど、
        大抵の場合はバイナリアップグレード機能を使うより手間がかかります。
        しかし、ディスクのパーティション分割を変更したい (とか、
        変更しなければならない) 場合などには便利な方法でしょう。</para>
    </listitem>

    <listitem>
      <para><filename>/usr/src</filename> のソースコードから構築する方法。
        この手段は非常に柔軟な対応が可能ですが、
        ディスク空間と時間、そして専門的なノウハウを必要とします。
        詳細については
        <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
          ハンドブック</ulink>の
        <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/makeworld.html"><quote><command>make world</command> を利用する</quote></ulink> という章をご覧ください。
        また、非常に古いバージョンの &os;
        からのアップグレードは問題が発生することが多いため、
        そのような場合にはバイナリアップグレード、
        もしくは完全な再インストールを行なった方が効果的でしょう。</para>
    </listitem>
  </itemizedlist>

  <para>なるべくアップグレードを始める前に詳細について
    <filename>INSTALL.TXT</filename> をご覧ください。
    ソースからアップグレードする場合は
    <filename>/usr/src/UPDATING</filename> にも目を通す必要があります。</para>

  <para>最後になりますが、&os; の -STABLE もしくは -CURRENT
    ブランチを追いかけるために用意された手段の一つをとりたいと考えているなら、
    <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
      ハンドブック</ulink>の
    <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/current-stable.html"><quote>-CURRENT
        vs. -STABLE</quote></ulink> の節をご覧になるようお願いします。</para>

  <important>
    <para>もちろん言うまでもないことですが、
      &os; のアップグレードは、データと設定ファイルを
      <emphasis>すべて</emphasis> バックアップした後に行なうべきです。</para>
  </important>
</sect1>
