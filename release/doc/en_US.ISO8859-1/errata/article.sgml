<!--
	FreeBSD errata document.  Unlike some of the other RELNOTESng
	files, this file should remain as a single SGML file, so that
	the dollar FreeBSD dollar header has a meaningful modification
	time.  This file is all but useless without a datestamp on it,
	so we'll take some extra care to make sure it has one.

	(If we didn't do this, then the file with the datestamp might
	not be the one that received the last change in the document.)

-->

<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % articles.ent PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Articles Entity Set//EN">
%articles.ent;
<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN">
%release;

<!ENTITY release.bugfix "5.4-RELEASE">
<!ENTITY release.bugfix.next "5.5-RELEASE">
]>

<article>
  <articleinfo>
    <title>&os; &release.bugfix; Errata</title>

    <corpauthor>
    The &os; Project
    </corpauthor>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <year>2005</year>
      <year>2006</year>
      <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
    </copyright>

    <legalnotice id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.intel;
      &tm-attrib.sparc;
      &tm-attrib.general;
    </legalnotice>
  </articleinfo>

  <abstract>
    <para>This document lists errata items for &os; &release.bugfix;,
      containing significant information discovered after the release
      or too late in the release cycle to be otherwise included in the
      release documentation.
      This information includes security advisories, as well as news
      relating to the software or documentation that could affect its
      operation or usability.  An up-to-date version of this document
      should always be consulted before installing this version of
      &os;.</para>

    <para>This errata document for &os; &release.bugfix;
      will be maintained until the release of &os; &release.bugfix.next;.</para>
  </abstract>

  <sect1 id="intro">
    <title>Introduction</title>

    <para>This errata document contains <quote>late-breaking news</quote>
      about &os; &release.bugfix;.
      Before installing this version, it is important to consult this
      document to learn about any post-release discoveries or problems
      that may already have been found and fixed.</para>

    <para>Any version of this errata document actually distributed
      with the release (for example, on a CDROM distribution) will be
      out of date by definition, but other copies are kept updated on
      the Internet and should be consulted as the <quote>current
      errata</quote> for this release.  These other copies of the
      errata are located at <ulink
      url="http://www.FreeBSD.org/releases/"></ulink>, plus any sites
      which keep up-to-date mirrors of this location.</para>

    <para>Source and binary snapshots of &os; &release.branch; also
      contain up-to-date copies of this document (as of the time of
      the snapshot).</para>

    <para>For a list of all &os; CERT security advisories, see <ulink
      url="http://www.FreeBSD.org/security/"></ulink> or <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/"></ulink>.</para>

  </sect1>

  <sect1 id="security">
    <title>Security Advisories</title>

    <para>The following security advisories pertain to &os; &release.bugfix;.
      For more information, consult the individual advisories available from
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/"></ulink>.</para>

    <informaltable frame="none" pgwide="0">
      <tgroup cols="3">
	<colspec colwidth="1*">
	<colspec colwidth="1*">
	<colspec colwidth="3*">
	<thead>
	  <row>
	    <entry>Advisory</entry>
	    <entry>Date</entry>
	    <entry>Topic</entry>
	  </row>
	</thead>

	<tbody>
	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:03.cpio.asc"
		>06:03.cpio</ulink></entry>
	    <entry>11&nbsp;Janurary&nbsp;2006</entry>
	    <entry><para>Multiple vulnerabilities in &man.cpio.1;</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:02.ee.asc"
		>06:02.eex</ulink></entry>
	    <entry>11&nbsp;Janurary&nbsp;2006</entry>
	    <entry><para>&man.ee.1; temporary file privilege escalation</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:01.texindex.asc"
		>06:01.texindex</ulink></entry>
	    <entry>11&nbsp;Janurary&nbsp;2006</entry>
	    <entry><para>Texindex temporary file privilege escalation</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:09.htt.asc"
		>SA-05:09.htt</ulink></entry>
	    <entry>22&nbsp;May&nbsp;2005</entry>
	    <entry><para>information disclosure when using HTT</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:10.tcpdump.asc"
		>SA-05:10.tcpdump</ulink></entry>
	    <entry>9&nbsp;Jun&nbsp;2005</entry>
	    <entry><para>Infinite loops in tcpdump protocol decoding</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:11.gzip.asc"
		>SA-05:11.gzip</ulink></entry>
	    <entry>9&nbsp;Jun&nbsp;2005</entry>
	    <entry><para>gzip directory traversal and permission race vulnerabilities</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:13.ipfw.asc"
		>SA-05:13.ipfw</ulink></entry>
	    <entry>29&nbsp;Jun&nbsp;2005</entry>
	    <entry><para>ipfw packet matching errors with address tables</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:14.bzip2.asc"
		>SA-05:14.bzip2</ulink></entry>
	    <entry>29&nbsp;Jun&nbsp;2005</entry>
	    <entry><para>bzip2 denial of service and permission race vulnerabilities</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:15.tcp.asc"
		>SA-05:15.tcp</ulink></entry>
	    <entry>29&nbsp;Jun&nbsp;2005</entry>
	    <entry><para>TCP connection stall denial of service</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:16.zlib.asc"
		>SA-05:16.zlib</ulink></entry>
	    <entry>6&nbsp;Jul&nbsp;2005</entry>
	    <entry><para>Buffer overflow in zlib</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:17.devfs.asc"
		>SA-05:17.devfs</ulink></entry>
	    <entry>20&nbsp;Jul&nbsp;2005</entry>
	    <entry><para>devfs ruleset bypass</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:18.zlib.asc"
		>SA-05:18.zlib</ulink></entry>
	    <entry>27&nbsp;Jul&nbsp;2005</entry>
	    <entry><para>Buffer overflow in zlib</para></entry>
	  </row>

	  <row>
	    <entry><ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:19.ipsec.asc"
		>SA-05:19.ipsec</ulink></entry>
	    <entry>27&nbsp;Jul&nbsp;2005</entry>
	    <entry><para>IPsec incorrect key usage in AES-XCBC-MAC</para></entry>
	  </row>
	</tbody>
      </tgroup>
    </informaltable>
  </sect1>

  <sect1 id="open-issues">
    <title>Open Issues</title>

    <para>No issues.</para>
  </sect1>

  <sect1 id="late-news">
    <title>Late-Breaking News</title>

    <para>(6 May 2005) An error in the default permissions on the
      <filename class="devicefile">/dev/iir</filename> device node,
      which allowed unprivileged local users to send commands to the
      hardware supported by the &man.iir.4; driver.  Although the
      error was fixed prior to &release.prev;, it was applied too late
      in the release cycle to be mentioned in the release notes.  For
      more information, see security advisory
      <ulink url="ftp://ftp.freebsd.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:06.iir.asc">FreeBSD-SA-05:06.iir</ulink>.
      </para>

    <para>(6 May 2005) A bug in the validation of &man.i386.get.ldt.2;
      system call input arguments, which may allow kernel memory may
      be disclosed to the user process, has been fixed.  This bug was
      fixed prior to &release.prev;, although not in time to be
      mentioned in the release notes.  For more information, see
      security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:07.ldt.asc">FreeBSD-SA-05:07.ldt</ulink>.
      </para>

    <para>(6 May 2005) Several information disclosure vulnerabilities
      in various parts of the kernel have been fixed in
      &release.prev;, although too late to be mentioned in the release
      notes.  For more information, see security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:08.kmem.asc">FreeBSD-SA-05:08.kmem</ulink>.
      </para>

    <para>(24 Jun 2005) The &os;/sparc64 &release.bugfix; should
      have stated that the &os;/sparc64 GENERIC kernel prior
      to the upcoming 6.0-RELEASE officially only supports serial consoles.
      This is especially true for the &os;/sparc64 &release.bugfix;
      GENERIC kernel because the ofw_console(4) driver which also provides
      limited indirect support for graphical consoles has been replaced
      with the &man.uart.4; driver in favor better serial support.</para>

    <para>Due to this limitation to serial consoles the screen will
      stop working after the message <quote><computeroutput>jumping to kernel entry
	  at...</computeroutput></quote> is
      displayed when trying to use the &os;/sparc64 &release.bugfix;
      GENERIC kernel with a graphical console, while &os; itself continues
      working actually.</para>

    <para>If you want to use &os;/sparc64 with a graphical console anyway
      you can do one of the following:</para>

    <itemizedlist>
      <listitem>
	<para>In case your machine is equipped with a Sun Creator,
	  Sun Creator3D, or Sun Elite3D frame buffer card
	  and a Sun RS232 keyboard you can install &os;/sparc64
	  &release.bugfix; with a serial console and afterwards
	  compile a custom kernel with the following additional
	  options:</para>

	<programlisting>device          sc
device          creator
options         KBD_INSTALL_CDEV</programlisting>

	<para>Additionally you have to enable the <filename>tty[1-7]</filename>
	  entries in <filename>/etc/ttys</filename>
	  like so:</para>

	<programlisting>ttyv0   "/usr/libexec/getty Pc"         cons25  on  secure
# Virtual terminals
ttyv1   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv2   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv3   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv4   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv5   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv6   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv7   "/usr/libexec/getty Pc"         cons25  on  secure</programlisting>

	<para>This will yield native support for these keyboards
	  and frame buffers including VTY switching and X Window System.
	  Note that this really requires at least &os;/sparc64
	  &release.bugfix; otherwise it will not work on
	  most of the UltraSPARC models.</para>
      </listitem>

      <listitem>
	<para>In case your machine is equipped with a ATI Mach64
	  frame buffer (found on-board in e.g. Sun Blade 100/150
	  and Sun Ultra 5/10 as well as on Sun PGX8 and Sun PGX64
	  add-on cards) or a PS/2 or a USB keyboard update to a
	  &os;/sparc64 6.0 from June 10 2005 or later.
	  If you use the stock GENERIC kernel and <filename>/etc/ttys</filename>
	  from there no further action is required.</para>

	<para>This will yield native support for these keyboards and frame buffers
	  including VTY switching and X Window System.</para>
      </listitem>

      <listitem>
	<para>In case your machine is equipped with hardware other than those
	  mentioned above or you refuse to update to &os;/sparc64 6.0
	  you can re-enable the ofw_console(4) driver as a last resort.
	  To do so build a custom kernel with the following additional
	  options:</para>

	<programlisting>device          ofw_console
device          sab
device          zs</programlisting>

	<para>and make sure to comment out the following kernel option:</para>

	<programlisting>device          uart</programlisting>

	<para>This will yield limited indirect support for
	  any graphical console hardware, however with poor performance,
	  and VTY switching as well as X Window System do not work with this.
	  Note that ofw_console(4) is not really MPSAFE and therefore
	  can result in panics under certain conditions.</para>
      </listitem>
    </itemizedlist>

    <para>For more details of how to recompile your kernel or
      update to &os; 6.0, see
      <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/kernelconfig.html">Configuring the &os; Kernel</ulink> and
      <ulink url="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/cutting-edge.html">The Cutting Edge</ulink> sections in the &os; Handbook, respectively.</para>
</article>
