<!--
	FreeBSD errata document.  Unlike some of the other RELNOTESng
	files, this file should remain as a single SGML file, so that
	the dollar FreeBSD dollar header has a meaningful modification
	time.  This file is all but useless without a datestamp on it,
	so we'll take some extra care to make sure it has one.

	(If we didn't do this, then the file with the datestamp might
	not be the one that received the last change in the document.)

-->

<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % articles.ent PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Articles Entity Set//EN">
%articles.ent;

<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN">
%release;
<!ENTITY release.bugfix "7.1-RELEASE">
]>

<article>
  <articleinfo>
    <title>&os;
<![ %release.type.current [
    &release.current;
]]>
<![ %release.type.snapshot [
    &release.prev;
]]>
<![ %release.type.release [
    &release.current;
]]>
    Errata</title>

    <corpauthor>
    The &os; Project
    </corpauthor>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>2008</year>
      <year>2009</year>
      <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
    </copyright>

    <legalnotice id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.intel;
      &tm-attrib.sparc;
      &tm-attrib.general;
    </legalnotice>
  </articleinfo>

  <abstract>
    <para>This document lists errata items for &os;
<![ %release.type.current [
      &release.current;,
]]>
<![ %release.type.snapshot [
      &release.prev;,
]]>
<![ %release.type.release [
      &release.current;,
]]>
      containing significant information discovered after the release
      or too late in the release cycle to be otherwise included in the
      release documentation.
      This information includes security advisories, as well as news
      relating to the software or documentation that could affect its
      operation or usability.  An up-to-date version of this document
      should always be consulted before installing this version of
      &os;.</para>

    <para>This errata document for &os;
<![ %release.type.current [
      &release.current;
]]>
<![ %release.type.snapshot [
      &release.prev;
]]>
<![ %release.type.release [
      &release.current;
]]>
      will be maintained until the release of &os; &release.next;.</para>
  </abstract>

  <sect1 id="intro">
    <title>Introduction</title>

    <para>This errata document contains <quote>late-breaking news</quote>
      about &os;
<![ %release.type.current [
      &release.current;.
]]>
<![ %release.type.snapshot [
      &release.prev;.
]]>
<![ %release.type.release [
      &release.current;.
]]>
      Before installing this version, it is important to consult this
      document to learn about any post-release discoveries or problems
      that may already have been found and fixed.</para>

    <para>Any version of this errata document actually distributed
      with the release (for example, on a CDROM distribution) will be
      out of date by definition, but other copies are kept updated on
      the Internet and should be consulted as the <quote>current
      errata</quote> for this release.  These other copies of the
      errata are located at <ulink
      url="http://www.FreeBSD.org/releases/"></ulink>, plus any sites
      which keep up-to-date mirrors of this location.</para>

    <para>Source and binary snapshots of &os; &release.branch; also
      contain up-to-date copies of this document (as of the time of
      the snapshot).</para>

    <para>For a list of all &os; CERT security advisories, see <ulink
      url="http://www.FreeBSD.org/security/"></ulink> or <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/"></ulink>.</para>

  </sect1>

  <sect1 id="security">
    <title>Security Advisories</title>

    <para>No advisories.</para>

<!--
    <para>The following security advisories pertain to &os; &release.bugfix;.
      For more information, consult the individual advisories available from
      <ulink url="http://security.FreeBSD.org/"></ulink>.</para>

    <informaltable frame="none" pgwide="0">
      <tgroup cols="3">
	<colspec colwidth="1*">
	<colspec colwidth="1*">
	<colspec colwidth="3*">
	<thead>
	  <row>
	    <entry>Advisory</entry>
	    <entry>Date</entry>
	    <entry>Topic</entry>
	  </row>
	</thead>

	<tbody>
	  <row>
	    <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-08:05.openssh.asc"
		>SA-08:05.openssh</ulink></entry>
	    <entry>17&nbsp;April&nbsp;2008</entry>
	    <entry><para>OpenSSH X11-forwarding privilege escalation</para></entry>
	  </row>
	</tbody>
      </tgroup>
    </informaltable>
-->

  </sect1>

  <sect1 id="open-issues">
    <title>Open Issues</title>

    <para>[20090105] As in the Announcement of 7.1-RELEASE, certain Intel NICs
      will come up as &man.igb.4; instead of &man.em.4; in this
      release.  There are only 3 PCI ID's that should have
      their name changed from &man.em.4; to &man.igb.4;:</para>

    <itemizedlist>
      <listitem>
	<para>0x10A78086</para>
      </listitem>

      <listitem>
	<para>0x10A98086</para>
      </listitem>

      <listitem>
	<para>0x10D68086</para>
      </listitem>
    </itemizedlist>

    <para>You should be able to determine if your card will
      change names by running the following command:</para>

    <screen>&prompt.user; pciconf -l
. . .
em0@pci0:0:25:0: class=0x020000 card=0x02381028 chip=0x10c08086 rev=0x02 hdr=0x00</screen>

    <para>and for the line representing your NIC (should be named
      <emphasis>em</emphasis> on older systems,
      e.g. <emphasis>em0</emphasis> or <emphasis>em1</emphasis>, etc)
      check the fourth column.  If that says
      <literal>chip=0x10a78086</literal> (or one of the other two IDs
      given above) you will have the adapter's name change.</para>
  </sect1>

  <sect1 id="late-news">
    <title>Late-Breaking News and Corrections</title>

    <para>[20090105] The Release Notes for 7.1-RELEASE should have mentioned
      changes that the &man.ae.4; driver has been added to provide support
      for the Attansic/Atheros L2 FastEthernet controllers.
      This driver is not enabled in <filename>GENERIC</filename>
      kernels for this release.</para>

    <para>[20090105] The Release Notes for 7.1-RELEASE included the
      following misdescriptions:</para>

    <itemizedlist>
      <listitem>
	<para>In the entry of &man.linux.4; ABI support,
	  <function>get_setaffinity()</function> should have been
	  <function>sched_setaffinity()</function>.</para>
      </listitem>
    </itemizedlist>

    <para>[20090105] The Release Notes for 7.1-RELEASE should have
      mentioned changes that the &man.jme.4; driver has been added to
      provide support for PCIe adapters based on JMicron JMC250
      gigabit Ethernet and JMC260 fast Ethernet controllers.</para>

    <para>[20090105] The Release Notes for 7.1-RELEASE should have
      mentioned changes that the &man.age.4; driver has been added to
      provide support for Attansic/Atheros L1 gigabit Ethernet
      controller.</para>

    <para>[20090105] The Release Notes for 7.1-RELEASE should have
      mentioned changes that the &man.malo.4; driver has been added to
      provide support for Marvell Libertas 88W8335 based PCI network
      adapters.</para>

    <para>[20090105] The Release Notes for 7.1-RELEASE should have
      mentioned changes that the bm(4) driver has been added to
      provide support for Apple Big Mac (BMAC) Ethernet controller,
      found on various Apple G3 models.</para>

    <para>[20090105] The Release Notes for 7.1-RELEASE should have
      mentioned changes that the et(4) driver has been added to
      provide support for Agere ET1310 10/100/Gigabit Ethernet
      controller.</para>

    <para>[20090105] The Release Notes for 7.1-RELEASE should have
      mentioned changes that the &man.glxsb.4; driver has been added
      to provide support for the Security Block in AMD Geode LX
      processors.</para>

    <para>[20090105] The Release Notes for 7.1-RELEASE should have
      mentioned that &os; now supports multiple routing tables.  To
      enable this, the following steps are needed:</para>

    <itemizedlist>
      <listitem>
	<para>Add the following kernel configuration option and
	  rebuild the kernel.  The <literal>2</literal> is the number
	  of FIB (Forward Information Base, synonym for a routing
	  table here).  The maximum value is 16.</para>

	<programlisting>options	ROUTETABLES=2</programlisting>

	<para>The procedure for rebuilding the &os; kernel is
	  described in the <ulink
	  url="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/makeworld.html#AEN30408">&os;
	  Handbook</ulink>.</para>

	<para>This number can be modified on boot time.  To do so, add
	  the following to <filename>/boot/loader.conf</filename> and
	  reboot the system:</para>

	<programlisting>net.fibs=6</programlisting>
      </listitem>

      <listitem>
	<para>Set a loader tunable <varname>net.my_fibnum</varname> if
	  needed.  This means the default number of routing tables.
	  If not specified, <literal>0</literal> will be used.</para>
      </listitem>

      <listitem>
	<para>Set a loader tunable
	  <varname>net.add_addr_allfibs</varname> if needed.  This
	  enables to add routes to all FIBs for new interfaces by
	  default.  When this is set to <literal>0</literal>, it will
	  only allocate routes on interface changes for the FIB of the
	  caller when adding a new set of addresses to an interface.
	  Note that this tunable is set to <literal>1</literal> by
	  default.</para>
      </listitem>
    </itemizedlist>

    <para>To select one of the FIBs, the new &man.setfib.1; utility
      can be used.  This set an associated FIB with the process.  For
      example:</para>

    <screen>&prompt.root; setfib -3 ping target.example.com</screen>

    <para>The FIB #3 will be used for the &man.ping.8; command.</para>

    <para>The FIB which the packet will be associated with will be
      determined in the following rules:</para>

    <itemizedlist>
      <listitem>
	<para>All packets which have a FIB associated with them will
	  use the FIB.  If not, FIB #0 will be used.</para>
      </listitem>

      <listitem>
	<para>A packet received on an interface for forwarding uses
	  FIB #0.</para>
      </listitem>

      <listitem>
	<para>A TCP listen socket associated with an FIB will generate
	  accept sockets which are associated with the same FIB.</para>
      </listitem>

      <listitem>
	<para>A packet generated in response to other packet uses the
	  FIB associated with the packet being responded to.</para>
      </listitem>

      <listitem>
	<para>A packet generated on tunnel interfaces such as
	  &man.gif.4; and &man.tun.4; will be encapsulated using the
	  FIB of the process which set up the tunnel.</para>
      </listitem>

      <listitem>
	<para>Routing messages will be associated with the process's
	  FIB.</para>
      </listitem>
    </itemizedlist>

    <para>Also, the &man.ipfw.8; now supports an action rule
      <literal>setfib</literal>.  The following action:</para>

    <programlisting>setfib <replaceable>fibnum</replaceable></programlisting>

    <para>will make the matched packet use the FIB specified in
      <replaceable>fibnum</replaceable>.  The rule processing
      continues at the next rule.</para>
  </sect1>
</article>
