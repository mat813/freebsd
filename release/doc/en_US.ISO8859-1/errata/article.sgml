<!-- 
	FreeBSD errata document.  Unlike some of the other RELNOTESng
	files, this file should remain as a single SGML file, so that
	the dollar FreeBSD dollar header has a meaningful modification
	time.  This file is all but useless without a datestamp on it,
	so we'll take some extra care to make sure it has one.

	(If we didn't do this, then the file with the datestamp might
	not be the one that received the last change in the document.)

-->

<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % man PUBLIC "-//FreeBSD//ENTITIES DocBook Manual Page Entities//EN">
%man;
<!ENTITY % authors PUBLIC  "-//FreeBSD//ENTITIES DocBook Author Entities//EN">
%authors;
<!ENTITY % mlists PUBLIC "-//FreeBSD//ENTITIES DocBook Mailing List Entities//EN">
%mlists;
<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN">
%release;
]>

<article>
  <articleinfo>
    <title>&os;
<![ %release.type.snapshot [
    &release.prev;
]]>
<![ %release.type.release [
    &release.current;
]]>
    Errata</title>

    <corpauthor>
    The &os; Project
    </corpauthor>

    <pubdate>$FreeBSD$</pubdate>

    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <holder role="mailto:doc@FreeBSD.org">The FreeBSD Documentation Project</holder>
    </copyright>
  </articleinfo>

  <abstract>
    <para>This document lists errata items for &os; 
<![ %release.type.snapshot [
      &release.prev;,
]]>
<![ %release.type.release [
      &release.current;,
]]>
      containing significant information discovered after the release.
      This information includes security advisories, as well as news
      relating to the software or documentation that could affect its
      operation or usability.  An up-to-date version of this document
      should always be consulted before installing this version of
      &os;.</para>

    <para>This errata document for &os; 
<![ %release.type.snapshot [
      &release.prev;
]]>
<![ %release.type.release [
      &release.current;
]]>
      will be maintained until the release of &os; &release.next;.</para>
  </abstract>

  <sect1>
    <title>Introduction</title>

    <para>This errata document contains <quote>late-breaking news</quote>
      about &os;
<![ %release.type.snapshot [
      &release.prev;.
]]>
<![ %release.type.release [
      &release.current;.
]]>
      Before installing this version, it is important to consult this
      document to learn about any post-release discoveries or problems
      that may already have been found and fixed.</para>

    <para>Any version of this errata document actually distributed
      with the release (for example, on a CDROM distribution) will be
      out of date by definition, but other copies are kept updated on
      the Internet and should be consulted as the <quote>current
      errata</quote> for this release.  These other copies of the
      errata are located at <ulink
      url="http://www.FreeBSD.org/releases/"></ulink>, plus any sites
      which keep up-to-date mirrors of this location.</para>

    <para>Source and binary snapshots of &os; &release.branch; also
      contain up-to-date copies of this document (as of the time of
      the snapshot).</para>

    <para>For a list of all &os; CERT security advisories, see <ulink
      url="http://www.FreeBSD.org/security/"></ulink> or <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/"></ulink>.</para>

  </sect1>

  <sect1>
    <title>Security Advisories</title>

<![ %release.type.release [
    <para>No active security advisories.</para>
]]>

<![ %release.type.snapshot [

    <para>A race condition existed whereby a file could be removed
      between a &man.fstatfs.2; call and the point where the file is
      accessed, causing a kernel panic.  Only the &man.procfs.5;
      filesystem was known to be vulnerable to this attack.  This bug
      was fixed in &os; &release.prev;, but the security advisory
      describing the bug was issued after the release.  For more
      information, including a workaround and bug fix, see security
      advisory <ulink 
        url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:09.fstatfs.asc">FreeBSD-SA-02:09</ulink>.</para>

    <para>An <quote>off-by-one</quote> bug has been fixed in
      <application>OpenSSH</application>'s multiplexing code.  This bug
      could have allowed an authenticated remote user to cause
      &man.sshd.8; to execute arbitrary code with superuser
      privileges, or allowed a malicious SSH server to execute arbitrary
      code on the client system with the privileges of the client user.  Various workarounds
      and bugfixes, for versions of
      <application>OpenSSH</application> in both the base system and
      Ports Collection, can be found in security advisory <ulink
        url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:13.openssh.asc">FreeBSD-SA-02:13</ulink>.</para>

    <para>A programming error in <application>zlib</application> could
      result in attempts to free memory multiple times.  The
      &man.malloc.3;/&man.free.3; routines used in &os; are not
      vulnerable to this error, but applications receiving
      specially-crafted blocks of invalid compressed data could
      be made to function incorrectly or abort.  This
      <application>zlib</application> bug has been fixed.  For a
      workaround and solutions, see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:18.zlib.v1.2.asc">FreeBSD-SA-02:18</ulink>.</para>

    <para>Bugs in the TCP SYN cache (<quote>syncache</quote>) and SYN
      cookie (<quote>syncookie</quote>) implementations, which could
      cause legitimate TCP/IP traffic to crash a machine, have been
      fixed.  For a workaround and patches, see security advisory
      <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:20.syncache.asc">FreeBSD-SA-02:20</ulink>.</para>

    <para>A routing table memory leak, which could allow a remote
      attacker to exhaust the memory of a target machine, has been
      fixed.  A workaround and patches can be found in security
      advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:21.tcpip.asc">FreeBSD-SA-02:21</ulink>.</para>

    <para>A bug with memory-mapped I/O, which could cause a system
      crash, has been fixed.  For more information about a solution,
      see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:22.mmap.asc">FreeBSD-SA-02:22</ulink>.
      </para>

    <para>A security hole, in which SUID programs could be made to
      read from or write to inappropriate files through manipulation
      of their standard I/O file descriptors, has been fixed.
      Information regarding a solution can be found in security
      advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:23.stdio.asc">FreeBSD-SA-02:23</ulink>.
      </para>

]]>
  </sect1>

  <sect1>
    <title>System Update Information</title>

<![ %release.type.release [
    <para>No active updates.</para>
]]>

<![ %release.type.snapshot [

    <para>Certain SSH clients, when attempting to connect to a &os;
      &release.prev; server, will unexpectedly present an
      <application>S/Key</application> prompt, even if &man.sshd.8; on
      the server has not been later explicitly configured for
      <application>S/Key</application> authentication.  This is due to
      the default settings of clients having changed (e.g. use of SSH
      protocol version 2 where it was not used before), or from a
      change from the client's old default authentication sequence.
      There are a number of ways to disable this behavior:

      <itemizedlist>
        <listitem>
	  <para>On newer <application>OpenSSH</application> clients,
	      add the following line to your 
	      <filename>~/.ssh/config</filename> file:
<programlisting>PreferredAuthentications publickey,password,keyboard-interactive</programlisting>
	  </para>
	</listitem>
        <listitem>
	  <para>For <application>PuTTY</application> clients, the
	      authentication sequence order cannot be changed, but
	      keyboard-interactive authentication can be disabled in the
	      settings.</para>
	</listitem>
        <listitem>
	  <para>To disable keyboard-interactive authentication in the
	      server, uncomment the following line in the
	      <filename>/etc/ssh/sshd_config</filename> file (on the
	      server host):
<programlisting>ChallengeResponseAuthentication no</programlisting> 
	  </para>
	</listitem>
      </itemizedlist>

      This problem has been corrected in &os; &release.current;.
    </para>

    <para>The release notes mentioned the new sbni device driver, but
      gave an incorrect reference to the program in the &os; Ports
      Collection used to configure the driver.  The correct filename for
      the port is <filename role="package">sysutils/sbniconfig</filename>.</para>

    <para>Linux emulation now requires <literal>options
      SYSVSEM</literal> in the kernel configuration.  This dependency
      was introduced into &os; before &release.prev;.</para>

    <para>Packages containing some optional components of 
      <application>KDE</application> were accidentally omitted from
      the ISO images (and hence the official 4-CD set).  In prior
      releases, these packages could be installed using the
      <filename role="package">x11/kde2</filename> package.  These components can either be
      installed using the &os; Ports Collection or by downloading the
      binary packages from one of the &os; FTP servers.  The affected
      ports are:
      <filename role="package">games/kdegames2</filename>, <filename role="package">misc/kdeutils2</filename>,
      <filename role="package">editors/koffice</filename>, <filename role="package">net/kdenetwork2</filename>,
      <filename role="package">graphics/kdegraphics2</filename>, and
      <filename role="package">audio/kdemultimedia2</filename>.  Note that the 
      <filename role="package">x11/kdelibs2</filename> and <filename role="package">x11/kdebase2</filename>
      packages, which are frequently required by these other
      components, <emphasis>are</emphasis> included on disk 1 of the
      official 4-CD set.
	<footnote>
	  <para>The complete &os; package collection currently fills
	    nine CDROMs.  The official 4-CD set therefore only
	    contains a subset of the available packages.  Several &os;
	    vendors offer distributions that contain a more complete
	    set of packages; a more complete collection can also be
	    found on the &os; FTP sites.</para>
	</footnote>
      </para>

    <para>A binary package containing <application>Samba</application>
      was accidentally omitted from the ISO images.  This software can
      either be installed using the <filename role="package">net/samba</filename> port in the
      &os; Ports Collection or by downloading and installing its
      binary package from one of the &os; FTP servers.</para>

    <para>A bug has been fixed in soft updates that can cause
      occasional filesystem corruption if the system is shut down
      immediately after performing heavy filesystem activities,
      such as installing a new kernel or other software.
      The system shutdown was unable to flush all buffers on
      shutdown and would report this fact.  The problem can be
      worked around by running &man.sync.8; a few times before rebooting, or
      solved by updating to a recent &os; &release.current; snapshot.</para>

    <para>The ciss driver was inadvertently omitted from the &os;
      &release.prev; <filename>GENERIC</filename> kernel, thus making
      it impossible (or at least very difficult) to perform an initial
      install to disks attached to this controller.  This problem has
      been corrected in &os; &release.current;.</para>

]]>
  </sect1>
</article>
