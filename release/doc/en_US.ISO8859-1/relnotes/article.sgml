<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % articles.ent PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Articles Entity Set//EN">
%articles.ent;

<!ENTITY % release PUBLIC "-//FreeBSD//ENTITIES Release Specification//EN">
%release;
]>

<article>
<articleinfo>
  <title>&os; &release.current; Release Notes</title>

  <corpauthor>The &os; Project</corpauthor>

  <pubdate>$FreeBSD$</pubdate>

  <copyright>
    <year>2012</year>
    <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
  </copyright>

  <legalnotice id="trademarks" role="trademarks">
    &tm-attrib.freebsd;
    &tm-attrib.ibm;
    &tm-attrib.ieee;
    &tm-attrib.intel;
    &tm-attrib.sparc;
    &tm-attrib.general;
  </legalnotice>

  <abstract>
    <para>The release notes for &os; &release.current; contain a summary
      of the changes made to the &os; base system on the
      &release.branch; development line.
      This document lists applicable security advisories that were issued since
      the last release, as well as significant changes to the &os;
      kernel and userland.
      Some brief remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1 id="intro">
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current;.  It
    describes recently added, changed, or deleted features of &os;.
    It also provides some notes on upgrading
    from previous versions of &os;.</para>

  <para>This distribution of &os; &release.current; is a
    &release.type; distribution.  It can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="&url.books.handbook;/mirrors.html"><quote>Obtaining
    &os;</quote> appendix</ulink> to the <ulink
    url="&url.books.handbook;/">&os;
    Handbook</ulink>.</para>

  <para>All users are encouraged to consult the release errata before
    installing &os;.  The errata document is updated with
    <quote>late-breaking</quote> information discovered late in the
    release cycle or after the release.  Typically, it contains
    information on known bugs, security advisories, and corrections to
    documentation.  An up-to-date copy of the errata for &os;
    &release.current; can be found on the &os; Web site.</para>

</sect1>

<sect1 id="new">
  <title>What's New</title>

  <para>This section describes
    the most user-visible new or changed features in &os;
    since &release.prev;.</para>

  <para>Typical release note items
    document recent security advisories issued after
    &release.prev;,
    new drivers or hardware support, new commands or options,
    major bug fixes, or contributed software upgrades.  They may also
    list changes to major ports/packages or release engineering
    practices.  Clearly the release notes cannot list every single
    change made to &os; between releases; this document focuses
    primarily on security advisories, user-visible changes, and major
    architectural improvements.</para>

  <sect2 id="security">
    <title>Security Advisories</title>

      <para>Problems described in the following security advisories have
	been fixed.  For more information, consult the individual
	advisories available from
	<ulink url="http://security.FreeBSD.org/"></ulink>.</para>

      <informaltable frame="none" pgwide="1">
	<tgroup cols="3">
	  <colspec colwidth="1*">
	  <colspec colwidth="1*">
	  <colspec colwidth="3*">
	  <thead>
	    <row>
	      <entry>Advisory</entry>
	      <entry>Date</entry>
	      <entry>Topic</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:01.mountd.asc"
		  >SA-11:01.mountd</ulink></entry>
	      <entry>20&nbsp;April&nbsp;2011</entry>
	      <entry><para>Network ACL mishandling in &man.mountd.8;</para></entry>
	    </row>

	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:02.bind.asc"
		  >SA-11:02.bind</ulink></entry>
	      <entry>28&nbsp;May&nbsp;2011</entry>
	      <entry><para>BIND remote DoS with large RRSIG RRsets and negative
		  caching</para></entry>
	    </row>

	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:04.compress.asc"
		  >SA-11:04.compress</ulink></entry>
	      <entry>28&nbsp;September&nbsp;2011</entry>
	      <entry><para>Errors handling corrupt compress file in
		  &man.compress.1; and &man.gzip.1;</para></entry>
	    </row>

	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:05.unix.asc"
		  >SA-11:05.unix</ulink></entry>
	      <entry>28&nbsp;September&nbsp;2011</entry>
	      <entry><para>Buffer overflow in handling of UNIX socket
		  addresses</para></entry>
	    </row>

	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:06.bind.asc"
		  >SA-11:06.bind</ulink></entry>
	      <entry>23&nbsp;December&nbsp;2011</entry>
	      <entry><para>Remote packet Denial of Service against &man.named.8;
		  servers</para></entry>
	    </row>

	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:07.chroot.asc"
		  >SA-11:07.chroot</ulink></entry>
	      <entry>23&nbsp;December&nbsp;2011</entry>
	      <entry><para>Code execution via chrooted ftpd</para></entry>
	    </row>

	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:08.telnetd.asc"
		  >SA-11:08.telnetd</ulink></entry>
	      <entry>23&nbsp;December&nbsp;2011</entry>
	      <entry><para>telnetd code execution vulnerability</para></entry>
	    </row>

	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:09.pam_ssh.asc"
		  >SA-11:09.pam_ssh</ulink></entry>
	      <entry>23&nbsp;December&nbsp;2011</entry>
	      <entry><para>pam_ssh improperly grants access when user account has
		  unencrypted SSH private keys</para></entry>
	    </row>

	    <row>
	      <entry><ulink url="http://security.freebsd.org/advisories/FreeBSD-SA-11:10.pam.asc"
		  >SA-11:10.pam</ulink></entry>
	      <entry>23&nbsp;December&nbsp;2011</entry>
	      <entry><para><function>pam_start()</function> does not validate
		  service names</para></entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>
    </sect2>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

      <para revision="217152,217396" arch="amd64,i386,powerpc">&os; ELF image
	activator now supports <literal>PT_GNU_STACK</literal> program
	header.  This is disabled by default.  New &man.sysctl.8;
	variables <varname>kern.elf32.nxstack</varname> and
	<varname>kern.elf64.nxstack</varname> allow to enable
	<literal>PT_GNU_STACK</literal> for the specified ABIs
	(e.g. <literal>elf32</literal> for 32-bit ABI).</para>

    <sect3 id="boot">
      <title>Boot Loader Changes</title>

      <para></para>
    </sect3>

    <sect3 id="proc">
      <title>Hardware Support</title>

	<para revision="217044" arch="powerpc">&os;/powerpc now
	  supports Sony Playstation 3 using the OtherOS feature
	  available on firmwares 3.15 and earlier.</para>

      <sect4 id="mm">
	<title>Multimedia Support</title>

	<para></para>
      </sect4>

      <sect4 id="net-if">
	<title>Network Interface Support</title>

	  <para revision="217649">A bug in &man.alc.4; driver which
	    could make AR8152-based network interfaces stop working
	    has been fixed.</para>

	  <para revision="218530">The &man.igb.4; driver now supports
	    Intel I350 PCIe Gigabit Ethernet controller.</para>

	  <para revision="217593">The &man.ixgbe.4; driver has been
	    updated to version 2.3.8.</para>

	  <para revision="216860">A bug in &man.msk.4; driver has been
	    fixed.  It could prevent the RX checksum offloading from
	    working.</para>

	  <para revision="217794">A bug in &man.nfe.4; driver which
	    could prevent reinitialization after changing the MTU has
	    been fixed.</para>

	  <para revision="217511">A bug in &man.ral.4; and &man.run.4;
	    drivers which could prevent <literal>hostap</literal> mode
	    from working has been fixed.</para>

	  <para revision="216828">A rdcphy(4) driver for RDC Semiconductor
	    R6040 10/100 PHY has been added.</para>

	  <para revision="217498">The &man.re.4; driver now supports
	    RTL8168E/8111E-VL PCIe Gigabit Ethernet controllers.</para>

	  <para revision="217766">The &man.re.4; driver now supports
	    TX interrupt moderation on RTL810xE PCIe Fast Ethernet
	    controllers.</para>

	  <para revision="217902">The &man.re.4; driver now supports
	    another mechanism for RX interrupt moderation because of
	    performance problem.  A &man.sysctl.8; variable
	    <varname>dev.re.<replaceable>N</replaceable>.int_rx_mod</varname>
	    has been added to control amount of time to delay RX
	    interrupt processing in units of microsecond.  Setting it
	    to <literal>0</literal> completely disables RX interrupt
	    moderation.  A &man.loader.8; tunable
	    <varname>hw.re.intr_filter</varname> controls whether the
	    old mechanism utilizing MSI/MSI-X capability on the
	    supported controllers is used or not.  When setting it to
	    a non-zero value, the &man.re.4; driver uses the old
	    mechanism.  The default value is <literal>0</literal> and
	    this tunable has no effect on controllers without MSI/MSI-X
	    capability.</para>

	  <para revision="217246,217832">The &man.re.4; driver now
	    supports TSO (TCP Segmentation Offload) on RealTek
	    RTL8168/8111 C or later controllers.  Note that this is
	    disabled by default because broken frames can be sent
	    under certain conditions.</para>

	  <para revision="217381,218289">The &man.re.4; driver now
	    supports enabling TX and/or RX checksum offloading
	    independently from each other.  Note that TX IP checksum
	    is disabled on some RTL8168C-based network interfaces
	    because it can generate an wrong IP checksum when the
	    packet contains IP options.</para>

	  <para revision="217296">A bug in the &man.re.4; driver has
	    been fixed.  It could cause a panic when receiving a jumbo
	    frame on an RTL8169C, 8169D, or 8169E controller-based
	    network interface.</para>

	  <para revision="217911">The &man.re.4; driver now support
	    RTL8105E PCIe Fast Ethernet controller.</para>

	  <para revision="217910">The rlphy(4) driver now support
	    Realtek RTL8201E 10/100 PHY found in RTL8105E
	    controller.</para>

	  <para revision="217548">A bug in the &man.sis.4; driver has
	    been changed.  It could prevent a proper reinitialization
	    on DP83815, DP83816, and SiS 900/7016 controllers when
	    configuration of multicast packet handling and/or
	    promiscuous mode is changed.</para>

	  <para revision="216650">A bug in &man.vlan.4; pseudo interface
	    han been fixed.  It could have a random interface
	    identifier in an automatically configured IPv6 link-local
	    address, instead of one generated with the parent
	    interface's IEEE 802 48-bit MAC address and an algorithm
	    described in RFC 4291.</para>

	  <para revision="216829">A &man.vte.4; driver for RDC R6040 Fast
	    Ethernet controller, which is commonly found on Vortex86
	    System On a Chip, has been added.</para>

	  <para revision="216824">A bug in &man.wpi.4; driver has been
	    fixed.  It could display the following error messages and
	    result in the device unusable:</para>

	  <screen>wpi0: could not map mbuf (error 12)
wpi0: wpi_rx_intr: bus_dmamap_load failed, error 12</screen>

      </sect4>
    </sect3>

    <sect3 id="net-proto">
      <title>Network Protocols</title>

	<para revision="217169">A bug in &os; TCP/IP network stack has
	  been fixed.  The source address selection could not being
	  performed when multicast options were present but without an
	  interface being specified.</para>

	<para revision="216109,216114,216115,218152,218153,218155">
	  &os; TCP/IP network stack now supports &man.cc.9; pluggable
	  congestion control framework.  This allows TCP congestion
	  control algorithms to be implemented as dynamically loadable
	  kernel modules.  The following kernel modules are available
	  as of &release.current;: &man.cc.chd.4; for
	  CAIA-Hamilton-Delay algorithm, &man.cc.cubic.4; for CUBIC
	  algorithm, &man.cc.hd.4; for Hamilton-Delay algorithm,
	  &man.cc.htcp.4; for H-TCP algorithm, &man.cc.newreno.4; for
	  NewReno algorithm, and &man.cc.vegas.4; for Vegas algorithm.
	  The default algorithm can be set by a new &man.sysctl.8;
	  variable <varname>net.inet.tcp.cc.algorithm</varname>.  The
	  value must be set to one of the names listed by the
	  <varname>net.inet.tcp.cc.available</varname>, and
	  <literal>newreno</literal> is set at boot time.  For more
	  detail, see &man.cc.9; manual page.</para>
    </sect3>

    <sect3 id="disks">
      <title>Disks and Storage</title>

	<para revision="218014">The &man.gpart.8; GEOM class now
	  supports the following aliases for the MBR and EBR schemes:
	  <literal>fat32</literal>, <literal>ebr</literal>,
	  <literal>linux-data</literal>,
	  <literal>linux-raid</literal>, and
	  <literal>linux-swap</literal>.</para>

	<para revision="218014">The &man.gpart.8; GEOM class now
	  supports <literal>bios-boot</literal> GUID for the GPT
	  scheme which is used in GRUB 2 loader.</para>

	<para revision="216793">The &man.md.4; memory-backed pseudo disk
	  device driver now supports a &man.sysctl.8; variable
	  <varname>vm.md_malloc_wait</varname> to specify whether a
	  malloc-backed disk to using <varname>M_WAITOK</varname> or
	  <varname>M_NOWAIT</varname> for &man.malloc.9; calls.  The
	  <varname>M_WAITOK</varname> can prevent memory allocation
	  failure under high load.  If it is set to
	  <literal>0</literal>, a malloc-backed disk uses
	  <varname>M_NOWAIT</varname> for memory allocation.  The
	  default value is <literal>0</literal>.</para>

	<para revision="216941,217509">A bug in the &man.mmc.4; driver
	  that could fail in device detection has been fixed.</para>
    </sect3>

    <sect3 id="fs">
      <title>File Systems</title>

	<para revision="207141">The &os; Fast File System now supports
	  softupdates journaling.  It introduces a intent log into a
	  softupdates-enabled file system which eliminates the need
	  for background &man.fsck.8; even on unclean shutdown.  This
	  can be enabled in a per-filesystem basis by using a
	  <option>-j</option> flag in the &man.newfs.8; utility or a
	  <option>-j enable</option> option in the &man.tunefs.8;
	  utility.  Note that the &release.current; installer
	  automatically enables the softupdates journaling for
	  newly-created UFS file systems.</para>

	<para revision="216796">The &os; Fast File System now supports
	  <literal>TRIM</literal> command when freeing data blocks.  A
	  new flag <option>-t</option> in the &man.newfs.8; and
	  &man.tunefs.8; utilities sets the TRIM-enable flag in a file
	  system.  The TRIM-enable flag makes the file system send a
	  delete request to the underlying device for each freed
	  block.  The <literal>TRIM</literal> command is specified as
	  Data Set Management Command in ATA8-ACS2 standard to carry
	  the information related to deleted data blocks to device,
	  especially for SSD (Solid-State Drive) for optimization.</para>

	<para revision="218485">The following &man.sysctl.8; variables
	  for showing availability of UFS-related feature on the
	  system have been added:
	  <varname>kern.features.ufs_acl</varname> for ACL (Access
	  Control List) support in UFS,
	  <varname>kern.features.ufs_gjournal</varname> for journaling
	  support through &man.gjournal.8; for UFS,
	  <varname>kern.features.ufs_quota</varname> for UFS disk
	  quotas support, <varname>kern.features.ufs_quota64</varname>
	  for 64-bit UFS disk quotas support,
	  <varname>kern.features.softupdates</varname> for FFS
	  soft-updates support, and
	  <varname>kern.features.ffs_snapshot</varname> for FFS
	  snapshot support.</para>
    </sect3>
  </sect2>

  <sect2 id="userland">
    <title>Userland Changes</title>

      <para revision="217416">The &man.cpuset.1; utility now supports
	a <option>-C</option> flag to create a new cpuset and assign
	an existing process into that set, and an
	<literal>all</literal> keyword in <option>-l
	<replaceable>cpu-list</replaceable></option> option to specify
	all CPUs in the system.</para>

      <para revision="217505">A bug in the &man.fetch.1; utility which
	could prevent <command>STAT</command> FTP command from working
	properly has been fixed.</para>

      <para revision="218049">The &man.hastd.8; utility now drops
	<literal>root</literal> privileges of the worker processes to
	<literal>hast</literal> user.</para>

      <para revision="217013">The &man.ifconfig.8; utility now
	supports <literal>fdx</literal>, <literal>flow</literal>,
	<literal>hdx</literal>, and <literal>loop</literal> keywords
	as aliases of <literal>full-duplex</literal>,
	<literal>flowcontrol</literal>,
	<literal>half-duplex</literal>,
	and <literal>loopback</literal>, respectively.</para>

      <para revision="217642">The &man.netstat.1; utility now does not
	expose internal scope address representation used in the &os;
	kernel, which is derived from KAME IPv6 stack, in the results
	of <command>netstat -ani</command> and <command>netstat
	  -nr</command>.</para>

      <para revision="218127">The &man.newsyslog.8; utility now
	supports &man.xz.1; compression.  An <literal>X</literal> flag
	in the optional field has been added to specify the
	compression.</para>

      <para revision="216823">A &man.poweroff.8; utility has been added.
	This is equivalent to:</para>

      <screen>&prompt.root; shutdown -p now</screen>

      <para revision="218397">The &man.ppp.8; utility now supports
	<command>iface name <replaceable>name</replaceable></command>
	and <command>iface description
	<replaceable>description</replaceable></command> commands.
	These have the same functionalities as <literal>name</literal>
	and <literal>description</literal> subcommands in the
	&man.ifconfig.8; utility.</para>

      <para revision="216695">The &man.rtld.1; runtime linker now supports
	shared objects as filters in ELF shared libraries.  Both
	standard and auxiliary filtering have been supported.  The
	&man.rtld.1; linker's processing of a filter defers loading a
	filtee until a filter symbol is referenced unless
	<varname>LD_LOADFLTR</varname> environment variable is defined
	or a <literal>-z loadfltr</literal> option was specified when
	the filter was created.</para>

      <para revision="217133">A race condition in the &man.sed.1;
	utility has been fixed.  When an <option>-i</option> option is
	specified, it could cause a short time window with no file
	with the original file name.</para>

      <para revision="216629">The &man.sh.1; program now supports
	<command>kill</command> as a built-in command.  This allows
	specifying <literal>%<replaceable>job</replaceable></literal>
	which is equivalent to the corresponding process group.  Note
	that this built-in command returns the exit status
	<literal>2</literal> instead of <literal>1</literal> if an
	fatal error occurs as other built-in commands do.</para>

      <para revision="217176,217472">A bug in the &man.sh.1; program has been
	fixed for POSIX conformance.  It could return an wrong exit
	status when an <command>exit</command> command with no
	parameter is specified in the <literal>EXIT trap</literal>
	handler, which is triggered when the shell terminates.
	In trap actions for other signals, <command>exit</command>
	command with no parameter returns an exit status corresponding
	to the received signal.</para>

      <para revision="217557">A bug in the &man.sh.1; program has been
	fixed.  When a foreground job exits on a signal, a message is
	printed to <filename>stdout</filename> about this. The buffer
	was not flushed after this which could result in the message
	being written to the wrong file if the next command was a
	built-in and had <filename>stdout</filename> redirected.</para>

      <para revision="217461">The &man.sh.1; program now supports a
	<option>--</option> flag in <command>trap</command> command to
	stop the option processing.</para>

      <para revision="217206"><literal>%builtin</literal> keyword
	support in <varname>$PATH</varname> variable has been removed
	in the &man.sh.1; program.  All built-in commands are always
	found before looking up directories in
	<varname>$PATH</varname>.</para>

      <para revision="218466">Arithmetic expression handling code in
	the &man.sh.1; program has been updated by importing code from
	<application>dash</application>.  It now supports conditional
	operator (<literal>?:</literal>) and a bug in evaluation of
	&amp;&amp; and || around an arithmetic expression has been
	fixed.</para>

    <sect3 id="rc-scripts">
      <title><filename>/etc/rc.d</filename> Scripts</title>

      <para></para>
    </sect3>
  </sect2>

  <sect2 id="contrib">
    <title>Contributed Software</title>

      <para revision="222544"><literal>ACPI CA</literal> has been
	updated to version 20110527.</para>

      <para revision="228189"><application>ISC BIND</application> has
	been updated to version 9.8.1-P1.</para>

      <para revision="224014"><literal>dialog</literal> has been
	updated to version 1.1-20110707.</para>

      <para revision="218122">The <application>timezone</application>
	database has been updated to the
	<application>tzdata2011a</application> release.</para>

      <para revision="217698">&man.unifdef.1; utility has been updated
	to version 2.5.6.</para>
  </sect2>

  <sect2 id="ports">
    <title>Ports/Packages Collection Infrastructure</title>

    <para></para>
  </sect2>

  <sect2 id="releng">
    <title>Release Engineering and Integration</title>

      <para>The supported version of
	the <application>KDE</application> desktop environment
	(<filename role="package">x11/kde4</filename>) has been
	updated from 4.5.5 to 4.7.3.</para>
  </sect2>

  <sect2 id="doc">
    <title>Documentation</title>

    <para></para>

  </sect2>
</sect1>

<sect1 id="upgrade">
  <title>Upgrading from previous releases of &os;</title>

    <sect2>
      <title>Upgrading using freebsd-update(8) or source-based
	procedure</title>

  <para arch="amd64,i386">Beginning with &os; 6.2-RELEASE,
    binary upgrades between RELEASE versions (and snapshots of the
    various security branches) are supported using the
    &man.freebsd-update.8; utility.  The binary upgrade procedure will
    update unmodified userland utilities, as well as a unmodified GENERIC kernel
    distributed as a part of an official &os; release.
    The &man.freebsd-update.8; utility requires that the host being
    upgraded have Internet connectivity.</para>

  <para>Source-based upgrades (those based on recompiling the &os;
    base system from source code) from previous versions are
    supported, according to the instructions in
    <filename>/usr/src/UPDATING</filename>.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
    </sect2>

    <sect2>
      <title id="upgrade-pitfalls">User-visible incompatibilities</title>

      <para>This section describes notable incompatibilities which you
	might want to know before upgrading your system.</para>

      <sect3>
	<title>Update of <literal>dialog</literal></title>

	<para>The <literal>dialog</literal> library is used in &os;
	  new installer and &os; Ports Collection to display a dialog
	  window and allow users to select various options.  Note that
	  it is updated in &release.current; and there is several
	  differences in the key operation which might confuse users
	  who are familiar with releases prior to &release.current;.
	  For example, pushing enter key in a check list window is no
	  longer able to be used to check an item.  The new version
	  consistently supports space bar for selecting an item and
	  enter key for OK/Cancel selection.</para>
      </sect3>
    </sect2>
</sect1>
</article>
