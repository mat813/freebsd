<articleinfo>
  <title>&os;/&arch; &release.current; Release Notes</title>

  <pubdate>$FreeBSD$</pubdate>

  <corpauthor>The FreeBSD Project</corpauthor>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <year>2003</year>
    <holder role="mailto:doc@FreeBSD.org">The FreeBSD Documentation Project</holder>
  </copyright>

  <abstract>
    <para>The release notes for &os; &release.current; contain a
      summary of the changes made to the &os; base system since
      &release.prev;.  Both changes for kernel and userland are
      listed, as well as applicable security advisories for the base
      system that were issued since the last release.  Some brief
      remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1>
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current; on the &arch.print; hardware platform.  It
    describes new features of &os; that have been added (or changed)
    since &release.prev;.  It also provides some notes on upgrading
    from previous versions of &os;.</para>

<![ %release.type.snapshot [

  <para>The &release.type; distribution to which these release notes
    apply represents a point along the &release.branch; development
    branch between &release.prev; and the future &release.next;.  Some
    pre-built, binary &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.release [

  <para>This distribution of &os; &release.current; is a
    &release.type; distribution.  It can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors.html"><quote>Obtaining
    FreeBSD</quote></ulink> appendix in the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
    Handbook</ulink>.</para>

]]>
</sect1>

<!--
	The "What's New" section of the release notes. 

	Guidelines for new entries:

	1.  If there is some obvious "keyword" associated with an
	entry (such as a manpage entry or an application name), try to
	put it at the start of the sentence.

	2.  Within each subsection (i.e. kernel, security, userland),
	list items in alphabetical order by these keywords.

	Some entries will have no obvious keywords to help with
	ordering.  In sections containing these entries, put those
	containing (e.g.) manpage references first, then some
	suitable SGML comment line as a demarc, then the remaining
	entries.

-->

<sect1>
  <title>What's New</title>

  <para>This section describes the most user-visible new or changed
    features in &os; since &release.prev;.  Typical release note items
    document new drivers or hardware support, new commands or options,
    major bugfixes, or contributed software upgrades.  Security
    advisories for the base system that were issued after
    &release.prev; are also listed.</para>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

    <para>A new in-kernel cryptographic framework (see &man.crypto.4;
      and &man.crypto.9;) has been imported from OpenBSD.  It provides
      a consistent interface to hardware and software implementations
      of cryptographic algorithms for use by the kernel and access to
      cryptographic hardware for user-mode applications.
      Hardware device drivers are provided to support hifn-based cards
      (&man.hifn.4;) and Broadcom-based cards (&man.ubsec.4;).</para>

    <para arch="i386,pc98">Initial support has been added for
      FireWire devices (see &man.firewire.4;).</para>

    <para arch="i386,pc98">Support for the CanBe power management
      controller has been added.</para>

    <para arch="i386,pc98">The ubsa driver has been added to support
      the Belkin F5U103 (and compatible) USB-to-serial adaptors.</para>

    <para>The &man.uftdi.4; driver, to support FTDI USB-to-serial
      devices, has been added.</para>

<!-- Above this line, kernel changes ordered by manpage/variable name -->

    <sect3>
      <title>Processor/Motherboard Support</title>

      <para></para>

    </sect3>

    <sect3>
      <title>Boot Loaders</title>

      <para arch="i386,pc98">The PC98 bootloader now has support for
        booting from SCSI MO media.</para>

<!-- Above this line, order boot loader changes by manpage/variable name-->

    </sect3>

    <sect3>
      <title>Network Interface Support</title>

      <para>The &man.nge.4; driver now supports network device
	&man.polling.4;.</para>

<!-- Above this line, order network driver changes by manpage/variable name-->

    </sect3>

    <sect3>
      <title>Network Protocols</title>

      <para>A <literal>FAST_IPSEC</literal> kernel option now allows
        the IPsec implementation to use the kernel &man.crypto.4; framework,
        along with its support for hardware cryptographic
        acceleration.  More information can be found in the
        &man.fast.ipsec.4; manual page.

        <note>
          <para>The <literal>FAST_IPSEC</literal> and
            <literal>IPSEC</literal> options are mutually
            exclusive.</para>
	</note>

        <note>
          <para>The <literal>FAST_IPSEC</literal> option is, at the
            moment, not compatible with IPv6 or the
            <literal>INET6</literal> option.</para>
	</note>

	</para>

      <para>A &man.gre.4; driver, which can encapsulate IP packets
        using GRE (RFC 1701) or minimal IP encapsulation for Mobile IP
        (RFC 2004), has been added.</para>

      <para>A bug in TCP NewReno, which caused premature exit from
	fast recovery with NewReno enabled, has been
	fixed.</para>

    </sect3>

    <sect3>
      <title>Disks and Storage</title>

      <para>The &man.ata.4; driver now supports accessing ATA devices
        as SCSI devices via the CAM layer and drivers (&man.cd.4;,
        &man.da.4;, &man.st.4;, and &man.pass.4;).  This feature requires
        <literal>device atapicam</literal> in the kernel
        configuration.  More information can be found in
        &man.atapicam.4;.</para>

      <para arch="i386,pc98">The &man.matcd.4; driver has been removed
        due to licensing issues.  (This removal actually occurred in
        &release.prev;, but was not mentioned in the release
        notes.)</para>

      <para>The trm driver has been added to support SCSI adapters
        using the Tekram TRM-S1040 SCSI chipset.</para>

    </sect3>

    <sect3>
      <title>Filesystems</title>

      <para></para>

    </sect3>

    <sect3>
      <title>PCCARD Support</title>

      <para></para>

    </sect3>

    <sect3>
      <title>Multimedia Support</title>

      <para></para>

    </sect3>

    <sect3>
      <title>Contributed Software</title>

      <para><application>BIND</application> has been updated to
        version 8.3.4.</para>

    </sect3>
  </sect2>

  <sect2 id="security">
    <title>Security Advisories</title>

    <para>Buffer overflows in kadmind(8) and k5admin have been
      corrected.  More details can be found in security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:40.kadmind.asc">FreeBSD-SA-02:40</ulink>.</para>

    <para>Multiple vulnerabilities in <application>BIND</application>
      have been fixed, as described in <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:43.bind.asc">FreeBSD-SA-02:43</ulink>.</para>

    <para>A file descriptor leak in the &man.fpathconf.2; system call,
      which could allow a local user to crash the system or
      cause a privilege escalation, has been fixed.  More details can
      be found in security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:44.filedesc.asc">FreeBSD-SA-02:44</ulink>.</para>

    <para>A remotely exploitable vulnerability in
      <application>CVS</application> has been corrected with the
      import of version 1.11.5.  More details can be found in security
      advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-03:01.cvs.asc">FreeBSD-SA-03:01</ulink>.</para>

  </sect2>

  <sect2 id="userland">
    <title>Userland Changes</title>

    <para>&man.burncd.8; now accepts a value of <literal>max</literal>
      for its <option>-s</option> option to set the drive's maximum
      write speed.</para>

    <para>&man.cdcontrol.1; now supports a
      <literal>speed</literal> command to set the maximum speed to be
      used by the drive (the maximum possible speed can be selected
      setting the speed to <literal>max</literal>).</para>

    <para>The &man.fwcontrol.8; utility has been added to help users
      access and control the FireWire subsystem.</para>

    <para>&man.ftpd.8; now supports a <option>-h</option> option to
      disable printing any host-specific information, such as the
      &man.ftpd.8; version or hostname, in server messages.</para>

    <para>&man.ftpd.8; now supports a <option>-P</option> option to
      specify a port on which to listen in daemon mode.  The default
      data port number is now set to be one less than the control port
      number, rather than being hard-coded.</para>

    <para>&man.ftpd.8; now supports an extended format of the
      <filename>/etc/ftpchroot</filename> file.  Please refer
      to the &man.ftpchroot.5; manpage, which is now available,
      for details.</para>

    <para>&man.ftpd.8; now supports login directory pathnames
      that specify simultaneously a directory for &man.chroot.2;
      and that to change to in the chrooted environment.  The
      <literal>/./</literal> separator is used for
      this purpose, like in other FTP daemons having this feature.
      It may be used in both &man.ftpchroot.5; and &man.passwd.5;.</para>

    <para>The &man.getconf.1; utility has been added.  It prints the
      values of POSIX or X/Open path or system configuration
      variables.</para>

    <para>&man.ipfw.8; now supports <literal>enable</literal> and
      <literal>disable</literal> commands to control various aspects
      of the operation of &man.ipfw.4; (including enabling and
      disabling the firewall itself).  These provide a more convenient
      and visible interface than the existing sysctl
      variables.</para>

    <para>&man.make.1; now supports a <option>-C</option> flag to
      change to a given directory before building its
      target(s).</para>

    <para>&man.newsyslog.8; now supports a <literal>W</literal> flag
      to force previously-started compression jobs for an entry (or
      group of entries specified with the <literal>G</literal> flag)
      to finish before beginning a new one.  This feature is designed
      to prevent system overloads caused by starting several
      compression jobs on big files simultaneously.</para>

    <para>The &man.pathchk.1; utility, which checks pathnames for
      validity or portability between POSIX systems, has been
      added.</para>

    <para>&man.pw.8; can now add a user whose name ends with a
      <literal>$</literal> character; this change is intended to help
      administration of <application>Samba</application>
      services.</para>

    <para>&man.rarpd.8; now accepts a <option>-t</option> flag to
      specify an alternative directory to
      <filename>/tftpboot</filename>.</para>

    <para>The base64 capabilities of &man.uuencode.1; and
      &man.uudecode.1; can now be automatically enabled by invoking
      these utilities as &man.b64encode.1; and &man.b64decode.1;
      respectively.</para>

<!-- Above this line, order userland changes by manpage/variable name-->

    <para>The definitions of the standard file streams
      (<varname>stdin</varname>, <varname>stdout</varname>, and
      <varname>stderr</varname>) have changed so that they are no
      longer compile-time constants.  Some older binaries may require
      updated 3.X compatability libraries (for example, by setting
      <literal>COMPAT3X=yes</literal> for a
      buildworld/installworld).</para>

    <sect3>
      <title>Contributed Software</title>

      <para>All of the <application>bzip2</application> suite of
        applications is now installed in the base system (in
        particular, <command>bzip2recover</command> is now built and
        installed.</para>

      <para><application>CVS</application> has been updated to
	1.11.5.</para>

      <para><application>groff</application> and its related utilities
	have been updated to FSF version 1.18.1.</para>

      <para><application>Heimdal Kerberos</application> has been updated to
	0.5.1.</para>

      <para><application>libz</application> has been updated to
	1.1.4.</para>

      <para><application>OpenSSH</application> has been updated to
        3.5p1.</para>

      <para><application>OpenSSL</application> has been updated to
        release 0.9.7.  Among other features, this release includes
        support for AES and takes advantage of &man.crypto.4;
        devices.</para>

      <para><application>sendmail</application> has been updated to
        version 8.12.7.</para>

      <para>The timezone database has been updated to the
	<filename>tzdata2002d</filename> release.</para>

    </sect3>

    <sect3>
      <title>Ports/Packages Collection</title>

      <para></para>

    </sect3>
  </sect2>

  <sect2>
    <title>Release Engineering and Integration</title>

    <para></para>

  </sect2>
</sect1>

<sect1>
  <title>Upgrading from previous releases of &os;</title>

  <para>If you're upgrading from a previous release of &os;, you
    generally will have three options:

    <itemizedlist>
      <listitem>
	<para>Using the binary upgrade option of &man.sysinstall.8;.
	  This option is perhaps the quickest, although it presumes
	  that your installation of &os; uses no special compilation
	  options.</para>
      </listitem>
      <listitem>
	<para>Performing a complete reinstall of &os;.  Technically,
	  this is not an upgrading method, and in any case is usually less
	  convenient than a binary upgrade, in that it requires you to
	  manually backup and restore the contents of
	  <filename>/etc</filename>.  However, it may be useful in
	  cases where you want (or need) to change the partitioning of
	  your disks.
      </listitem>
      <listitem>
	<para>From source code in <filename>/usr/src</filename>.  This
	  route is more flexible, but requires more disk space, time,
	  and technical expertise.  More information can be found
	  in the <ulink
	  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/makeworld.html"><quote>Using
	  <command>make world</command></quote></ulink> section of the <ulink
	  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
	  Handbook</ulink>.  Upgrading from very old
	  versions of &os; may be problematic; in cases like this, it
	  is usually more effective to perform a binary upgrade or a
	  complete reinstall.</para>
      </listitem>
    </itemizedlist>
  </para>

  <para>Please read the <filename>INSTALL.TXT</filename> file for more
    information, preferably <emphasis>before</emphasis> beginning an
    upgrade.  If you are upgrading from source, please be sure to read
    <filename>/usr/src/UPDATING</filename> as well.</para>

  <para>Finally, if you want to use one of various means to track the
    -STABLE or -CURRENT branches of &os;, please be sure to consult
    the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/current-stable.html"><quote>-CURRENT
    vs. -STABLE</quote></ulink> section of the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
    Handbook</ulink>.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
</sect1>

