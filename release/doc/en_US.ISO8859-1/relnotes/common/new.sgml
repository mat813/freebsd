<!--

	$FreeBSD$

	The "What's New" section of the release notes.  Within
	each subsection (i.e. kernel, security, userland), list
	items in chronological order, unless necessary to keep
	related items together, such as multiple release notes
	pertaining to a single program or module.

-->

<sect1>
  <sect1info>
    <pubdate>$FreeBSD$</pubdate>
  </sect1info>

  <title>What's New</title>

  <para>This section describes the most user-visible new or changed
  features in &os; since &release.prev;.</para>

  <para>Many additional changes were made to &os; that are not listed
  here for lack of space.  For example, documentation was corrected
  and improved, minor bugs were fixed, insecure coding practices were
  audited and corrected, and source code was cleaned up.</para>

  <sect2>
    <title>Kernel Changes</title>

    <para>The <literal>O_DIRECT</literal> flag has been added to
    &man.open.2; and &man.fcntl.2;.  Specifying this flag for open
    files will attempt to minimize the cache effects of reading and
    writing.</para>

    <para>An &man.orm.4; device has been added to claim the option
    ROMs in the ISA memory I/O space, to prevent other drivers from
    mistakenly assigning addresses that conflict with these ROMs.</para>

    <para>The out-of-swap process termination code now begins killing
    processes earlier to avoid deadlocks; it now also takes into
    account the swap space used by processes when computing the
    process sizes.</para>

    <sect3>
      <title>Processor/Motherboard Support</title>

      <para></para>

    </sect3>

    <sect3>
      <title>Network Interface Support</title>

      <para>The &man.fxp.4; driver now requires a <literal>device
      miibus</literal> entry in the kernel configuration file.</para>

      <para>The &man.wx.4; driver now supports the Intel PRO1000-F and
      PRO1000-T (10/100/1000) adapters.</para>
      
      <para>The &man.an.4; driver has received a few bug fixes;
      promiscuous mode now works, and it can be configured before being
      brought <literal>up</literal>.</para>

      <para>The &man.xl.4; driver now supports reception of VLAN
      tagged frames (on the <quote>Cyclone</quote> or newer
      chipsets).</para>

      <para>The &man.ti.4; driver correctly masks VLAN tags.</para>

      <para>Added the &man.nge.4; driver, which supports PCI Gigabit
      Ethernet adapters based on the National Semiconductor DP83820
      and DP83821 Gigabit Ethernet controller chips, including the
      D-Link DGE-500T, SMC EZ Card 1000 (SMC9462TX), Asante
      FriendlyNet GigaNIC 1000TA and 1000TPC and Addtron
      AEG320T.  This driver supports transmit and receive checksum
      offloading.</para>

      <para>The &man.lge.4; driver has been added to support the Level
      1 LXT1001 NetCellerator Gigabit Ethernet controller chip. This
      device is used on some fiber optic GigE cards from SMC, D-Link
      and Addtron.  Jumbograms and TCP/IP checksum offload on receive
      are supported, although hardware VLAN filtering is not.</para>

      <para>The &man.tx.4; driver now supports the fiber-optic
      SMC 9432FTX NICs.</para>

    </sect3>

    <sect3>
      <title>Network Protocols</title>

      <para>TCP now has RFC 1323 extensions enabled by default in
      &man.rc.conf.5;.</para>

      <para>RFC 1323 and RFC 1644 TCP extensions are now disabled for a
      connection in progress if no response has been received by the
      third SYN segment sent.  This behavior tries to work around
      (very old) terminal servers with buggy VJ header compression
      implementations.</para>

      <para>The <literal>TCP_RESTRICT_RST</literal> kernel option has
      been removed.  Similar functionality can be achieved with the
      <varname>net.inet.tcp.blackhole</varname> sysctl
      variable.</para>
    </sect3>

    <sect3>
      <title>Disks and Storage</title>

      <para>The &man.ata.4; driver again has write-caching enabled by 
      default.</para>
    </sect3>

    <sect3>
      <title>Filesystems</title>

      <para arch="i386">smbfs (CIFS) support in kernel has been
      added.</para>

    </sect3>

    <sect3>
      <title>Multimedia Support</title>

      <para></para>
    </sect3>

    <sect3>
      <title>Contributed Software</title>

      <para></para>
    </sect3>
  </sect2>
  <sect2>
    <title>Security Fixes</title>

    <para>A vulnerability in the &man.fts.3; routines (used by
    applications for recursively traversing a filesystem) could
    allow a program to operate on files outside the intended directory
    hierarchy.  This bug has been fixed (see security advisory
    FreeBSD-SA-01:40).</para>

    <para>The new <varname>net.inet.ip.maxfragpackets</varname> 
    and <varname>net.inet.ip.maxfragpackets</varname> sysctl
    variables limit the amount of memory that can be consumed by IPv4
    and IPv6 packet fragments, which defends against some denial of service
    attacks.</para>

  </sect2>
  <sect2>
    <title>Userland Changes</title>

    <para>&man.ip6fw.8; now has the ability to use a preprocessor and
    use the <option>-q</option> (quiet) flag when reading from a file.</para>

    <para>&man.ping.8; now supports a <option>-m</option> option to
    set the TTL of outgoing packets.</para>

    <para>&man.ln.1; now takes a <option>-h</option> flag to avoid
    following a target that is a link, with a <option>-n</option> flag
    for compatability with other implementations.</para>

    <para>&man.find.1; now has the <option>-anewer</option>,
    <option>-cnewer</option>, <option>-mnewer</option>,
    <option>-okdir</option>, and <option>-newer[acm][acmt]</option>
    primaries for comparisons of file timestamps.</para>

    <para>The performance of the ELF dynamic linker has been
    improved.</para>

    <para>&man.ifconfig.8; can now accept addresses in slash/CIDR
    notation.</para>

    <para>&man.c89.1; has been converted from a shell script to a
    binary executable, fixing some minor bugs.</para>

    <para>&man.vidcontrol.1; now supports a <option>-p</option> to
    take a snapshot of a &man.syscons.4; video buffer.  These
    snapshots can be manipulated by some of the
    <filename>scr2*</filename> utilities in the Ports
    Collection.</para>

    <para>&man.vidcontrol.1; now allows the user to omit the font size
    specification when loading a font, and has some better
    error-handling.</para>

    <para>&man.telnet.1; now supports a <option>-u</option> flag to
    allow connections to UNIX-domain (<literal>AF_UNIX</literal>)
    sockets.</para>

    <para>&man.newfs.8; now takes a <option>-U</option> option to
    enable softupdates on a new filesystem.</para>

    <para><filename>libcrypt</filename> now has support for Blowfish
    password hashing.</para>

    <para>Ukranian language support has been added to the &os;
    console.</para>

    <para>&man.savecore.8; now works correctly on machines with 2 GB
    or more of RAM.</para>

    <para>The syntax of &man.inetd.8;'s support for &man.faithd.8; is
    now compatable with that of other BSDs.</para>

    <para>The &man.resolver.3; in &os; now implements EDNS0 support,
    which will be necessary when working with IPv6 transport-ready
    resolvers/DNS servers. &merged;</para>

    <para>&man.df.1; now takes a <option>-l</option> option to only
    display information about locally-mounted filesystems.</para>

    <para>&man.whois.1; now directs queries for IP addresses to
    ARIN.</para>

    <para>The <option>-T</option> to &man.dump.8; no longer swallows
    an extra argument.</para>

    <para><filename>libfetch</filename> now has support for a
    <varname>HTTP_USER_AGENT</varname> environment variable.</para>

    <para>The &man.getprogname.3; and &man.setprogname.3; library
    functions have been added to manipulate the name of the current
    program.  They are used by error-reporting routines to produce
    consistent output.</para>

    <sect3>
      <title>Contributed Software</title>

      <para>The &man.ee.1; <application>Easy Editor</application> has
      been updated to 1.4.2.</para>

      <para><application>groff</application> and its related utilities
      have been updated to FSF version 1.17. This import brings in a
      new &man.mdoc.7; macro package (sometimes referred to as
      <literal>mdocNG</literal>), which removes many of the
      limitations of its predecessor.</para>

      <para>&man.pim6dd.8; and &man.pim6sd.8; have been removed due to
      restrictive licensing conditions.  These programs are available
      in the ports collection as <filename>net/pim6dd</filename> and
      <filename>net/pim6dd</filename>.</para>

      <para><application>sendmail</application> and associated utilities have been upgraded
      to version 8.11.4.  See
      <filename>/usr/src/contrib/sendmail/RELEASE_NOTES</filename>
      for more information.</para>

    </sect3>

    <sect3>
      <title>Ports/Packages Collection</title>

      <para>&man.pkg.version.1; now takes a <option>-s</option> flag
      to limit its operation to ports/packages matching a given
      string.</para>
    </sect3>

  </sect2>
</sect1>
