<articleinfo>
  <title>&os;/&arch; &release.current; Release Notes</title>

  <pubdate>$FreeBSD$</pubdate>

  <corpauthor>The FreeBSD Project</corpauthor>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <holder role="mailto:doc@FreeBSD.org">The FreeBSD Documentation Project</holder>
  </copyright>

  <abstract>
    <para>The release notes for &os; &release.current; contain a
      summary of the changes made to the &os; base system since
      &release.prev;.  Both changes for kernel and userland are
      listed, as well as applicable security advisories for the base
      system that were issued since the last release.  Some brief
      remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1>
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current; on the &arch.print; hardware platform.  It
    describes new features of &os; that have been added (or changed)
    since &release.prev;.  It also provides some notes on upgrading
    from previous versions of &os;.</para>

  <para>This distribution of &os; &release.current; is a
    <quote>point release</quote>, intended to address some issues
    (primarily security-related) discovered in &os; &release.base;.
    The distribution can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors.html"><quote>Obtaining
    FreeBSD</quote></ulink> appendix in the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
    Handbook</ulink>.</para>

</sect1>

<!--
	The "What's New" section of the release notes. 

	Guidelines for new entries:

	1.  If there is some obvious "keyword" associated with an
	entry (such as a manpage entry or an application name), try to
	put it at the start of the sentence.

	2.  Within each subsection (i.e. kernel, security, userland),
	list items in alphabetical order by these keywords.

	Some entries will have no obvious keywords to help with
	ordering.  In sections containing these entries, put those
	containing (e.g.) manpage references first, then some
	suitable SGML comment line as a demarc, then the remaining
	entries.

-->

<sect1>
  <title>What's New</title>

  <para>This section describes the most user-visible new or changed
    features in &os; since &release.prev;.  Typical release note items
    document new drivers or hardware support, new commands or options,
    major bugfixes, or contributed software upgrades.  Security
    advisories for the base system that were issued after
    &release.prev; are also listed.</para>

  <para>Release note entries that describe changes specific to this
    point release are marked with &new.461;.</para>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

    <para arch="i386">The &man.puc.4; (PCI <quote>Universal</quote>
      Communications) driver has been added, to help connect PCI-based
      serial ports to the &man.sio.4; driver.</para>

    <para>The kernel dump device can now be set via the
      <varname>dumpdev</varname> loader tunable.  As a result, it is now
      possible to obtain crash dumps from panics during the late stages
      of kernel initialization (before the system enters into
      single-user mode).</para>

    <para>The &man.snp.4; device is no longer static and can now be
      compiled as a module.</para>

    <para arch="i386">The &man.spic.4; driver, which provides access
      to the Jog Dial device on some Sony laptops, has been
      added.  &man.moused.8; support for this device has also been
      added.</para>

    <para arch="i386">The &man.viapm.4; driver for VIA SMBus
      power management controllers has been added.</para>

<!-- Above this line, kernel changes ordered by manpage/variable name -->

    <sect3>
      <title>Processor/Motherboard Support</title>

      <para arch="i386">The <literal>CPU_ATHLON_SSE_HACK</literal>
	kernel option has been added, which attempts to enable the SSE
	feature bit on newer Athlon CPUs if the BIOS has forgotten to
	enable it.</para>

      <para arch="i386">On some systems, the BIOS does not activate
	the I/O ports and memory of PCI devices, thus making them
	unusable.  The <literal>PCI_ENABLE_IO_MODES</literal> kernel
	option forces &os; to enable these devices so that they can be
	used.</para>
    </sect3>

    <sect3>
      <title>Boot Loaders</title>

      <para arch="i386"><filename>boot2</filename> now supports a
	<option>-n</option> option to disallow boot interruption by
	keypresses.</para>

<!-- Above this line, order boot loader changes by manpage/variable name-->

    </sect3>

    <sect3>
      <title>Network Interface Support</title>

      <para>The &man.an.4; driver now supports Cisco LEAP, as well as
        the <quote>Home</quote> WEP key.  The Linux Aironet
        utilities are now supported under emulation.</para>

      <para arch="i386">Generic support for ARCNET token-based
	networks has been added.</para>

      <para arch="i386">The cm driver has been added to support SMC
	COM90cx6 ARCNET network adapters.</para>

      <para>The &man.dc.4; driver now has support for VLANs.</para>

      <para arch="i386">Support for Intel Gigabit Ethernet cards in
	the <filename>GENERIC</filename> kernel is now provided by the
	&man.em.4; driver, rather than the &man.wx.4; driver.  The
	latter driver has been deprecated since &os;
	4.5-RELEASE.</para>

      <para arch="alpha">The &man.fpa.4; driver now works on Alpha
        machines.</para>

      <para>The my driver, which supports the Myson Fast Ethernet and
	Gigabit Ethernet adapters, has been added.</para>

      <para>The &man.wi.4; driver now has support for Prism II and
	Prism 2.5-based NICs.  104/128-bit WEP now works on Prism
	cards.</para>

      <para>The &man.wi.4; driver now supports using a &os; host as
	a wireless access point.  This functionality can be enabled 
	using the <literal>mediaopt hostap</literal> option of 
	&man.ifconfig.8;.  This feature requires a wireless 
	adapter based on the Prism II chipset.</para>

      <para>The &man.wi.4; driver now has support for
	<application>bsd-airtools</application>.</para>

      <para>The xe driver can now be built as a module.</para>

<!-- Above this line, order network driver changes by manpage/variable name-->

      <para>Selected network drivers now implement a
	semi-polling mode, which makes systems much more resilient to
	attacks and overloads.  To enable polling, the following options
	are required in a kernel configuration file:

	<programlisting>options DEVICE_POLLING
options HZ=1000 # not compulsory but strongly recommended</programlisting>

	The <varname>kern.polling.enable</varname> sysctl variable
	will then activate polling mode; with the
	<varname>kern.polling.user_frac</varname> sysctl indicating the
	percentage of CPU time to be reserved for userland.  The devices
	initially supporting polling are &man.dc.4;, &man.fxp.4;, &man.rl.4;, and
	&man.sis.4;.  More details can be found in the &man.polling.4;
	manual page.</para>
    </sect3>

    <sect3>
      <title>Network Protocols</title>

      <para>&man.bridge.4; now has better support for multiple,
	fully-independent bridging clusters, and is much more stable in
	the presence of dynamic attachments and detatchments.  Full
	support for VLANs is also supported.</para>

      <para>A bug in the IPsec processing for IPv4, which caused the
	inbound SPD checks to be ignored, has been fixed.</para>

      <para>A new ng_eiface netgraph module has been added, which
	appears as an Ethernet interface but delivers its Ethernet
	frames to a Netgraph hook.</para>

      <para>A new &man.ng.etf.4; netgraph node allows Ethernet type
	packets to be filtered to different hooks depending on
	ethertype.</para>

      <para>The &man.tcp.4; syncache implementation had a bug that
	could cause kernel panics; this has been fixed.</para>

      <para>The TCP implementation now properly ignores packets
	addressed to IP-layer broadcast addresses.</para>
    </sect3>

    <sect3>
      <title>Disks and Storage</title>

      <para>The &man.ahc.4; driver was synchronized with the version
	from &os; -CURRENT as of 29 April 2002.</para>

      <para>The &man.ata.4; driver was synchronized with the driver from
	&os; -CURRENT as of 18 March 2002.</para>

      <para>&new.461; A bug which sometimes prevented &man.ata.4; tagged
        queueing from working correctly has been corrected.</para>

      <para>The &man.ata.4; driver now has support for creating,
	deleting, querying, and rebuilding ATA RAIDs under control of
	&man.atacontrol.8;.</para>
    </sect3>

    <sect3>
      <title>Filesystems</title>

      <para>A bug was been fixed in soft updates that could cause
	occasional filesystem corruption if the system is shut down
	immediately after performing heavy filesystem activities, such
	as installing a new kernel or other software.</para>
    </sect3>

    <sect3>
      <title>PCCARD Support</title>

      <para arch="i386">&new.461; A bug has been fixed in the PCCARD
        power code.  This fixes a problem (primarily seen with Sony
        VAIO and Toshiba laptops) where some machines would hang at
        boot-time or at their first PCCARD access.  Some other
        problems related to this bug may be also be corrected;
        in particular, Toshiba laptops based on the ToPIC chip will
        now be able to use both slots at the same time, and some
        workarounds for PCI add-in cards are no longer
        necessary.</para> </sect3>

    <sect3>
      <title>Multimedia Support</title>

      <para arch="i386">The ufm driver, supporting the D-Link DSB-R100
	USB Radio, has been added.</para>

      <para arch="i386">The via82c686 sound driver now supports the VIA
	VT8233.</para>

      <para arch="i386">The ich sound driver now supports the SiS
	7012 chipset.</para>

      <para arch="i386">The &man.pcm.4; driver was synchronized with
	the version from &os; -CURRENT as of 22 April 2002.</para>

    </sect3>

    <sect3>
      <title>Contributed Software</title>

      <sect4>
	<title>IPFilter</title>

	<para><application>IPFilter</application> has been updated to
	  3.4.27.</para>

      </sect4>

      <sect4 arch="i386">
	<title>isdn4bsd</title>

	<para>The &man.ifpi2.4; driver for supporting the AVM
	  Fritz!Card PCI version 2 controller has been added.</para>

      </sect4>
    </sect3>
  </sect2>

  <sect2 id="security">
    <title>Security Advisories</title>

    <para>An <quote>off-by-one</quote> bug has been fixed in
      <application>OpenSSH</application>'s multiplexing code.  This bug
      could have allowed an authenticated remote user to cause
      &man.sshd.8; to execute arbitrary code with superuser
      privileges, or allowed a malicious SSH server to execute arbitrary
      code on the client system with the privileges of the client user.  (See security
      advisory <ulink
        url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:13.openssh.asc">FreeBSD-SA-02:13</ulink>.)</para>

    <para>A programming error in <application>zlib</application> could
      result in attempts to free memory multiple times.  The
      &man.malloc.3;/&man.free.3; routines used in &os; are not
      vulnerable to this error, but applications receiving
      specially-crafted blocks of invalid compressed data could
      be made to function incorrectly or abort.  This
      <application>zlib</application> bug has been fixed.  For a
      workaround and solutions, see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:18.zlib.v1.2.asc">FreeBSD-SA-02:18</ulink>.</para>

    <para>Bugs in the TCP SYN cache (<quote>syncache</quote>) and SYN
      cookie (<quote>syncookie</quote>) implementations, which could
      cause legitimate TCP/IP traffic to crash a machine, have been
      fixed.  For a workaround and patches, see security advisory
      <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:20.syncache.asc">FreeBSD-SA-02:20</ulink>.</para>

    <para>A routing table memory leak, which could allow a remote
      attacker to exhaust the memory of a target machine, has been
      fixed.  A workaround and patches can be found in security
      advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:21.tcpip.asc">FreeBSD-SA-02:21</ulink>.</para>

    <para>A bug with memory-mapped I/O, which could cause a system
      crash, has been fixed.  For more information about a solution,
      see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:22.mmap.asc">FreeBSD-SA-02:22</ulink>.
      </para>

    <para>A security hole, in which SUID programs could be made to
      read from or write to inappropriate files through manipulation
      of their standard I/O file descriptors, has been fixed.
      Information regarding a solution can be found in security
      advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:23.stdio.asc">FreeBSD-SA-02:23</ulink>.
      </para>

    <para>&new.461; The original fix for security advisory SA-02:23 (which
      addressed the use of file descriptors by set-user-id or
      set-group-id programs) contained an error.  It was still
      possible for systems using &man.procfs.5; or &man.linprocfs.5;
      to be exploited.  This error has now been corrected; a revised
      version of security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:23.stdio.asc">FreeBSD-SA-02:23</ulink>
      contains more details.</para>

    <para>Some unexpected behavior could be allowed with &man.k5su.8;
      because it does not require that an invoking user be a member of
      the <groupname>wheel</groupname> group when attempting to become
      the superuser (this is the case with &man.su.1;).  To avoid this
      situation, &man.k5su.8; is now installed non-SUID by default
      (effectively disabling it).  More information can be found in
      security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:24.k5su.asc">FreeBSD-SA-02:24</ulink>.</para>

    <para>Multiple vulnerabilities were found in the &man.bzip2.1;
      utility, which could allow files to be overwritten without
      warning or allow local users unintended access to files.  These
      problems have been corrected with a new import of
      <application>bzip2</application>.  For more information, see
      security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:25.bzip2.asc">FreeBSD-SA-02:25</ulink>.</para>

    <para>A bug has been fixed in the implementation of the TCP SYN 
      cache (<quote>syncache</quote>), which could allow a remote
      attacker to deny access to a service when accept filters
      (see &man.accept.filter.9;) were in use.  This bug has been 
      fixed; for more information, see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:26.accept.asc">FreeBSD-SA-02:26</ulink>.</para>

    <para>Due to a bug in &man.rc.8;'s use of shell globbing, users
      may be able to remove the contents of arbitrary files if
      <filename>/tmp/.X11-unix</filename> does not exist and the
      system can be made to reboot.  This bug has been corrected (see
      security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:27.rc.asc">FreeBSD-SA-02:27</ulink>).</para>

    <para>&new.461; A buffer overflow in the resolver, which could be exploited
      by a malicious domain name server or an attacker forging DNS
      messages, has been fixed.  See security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:28.resolv.asc">FreeBSD-SA-02:28</ulink>
      for more details.</para>

    <para>&new.461; A buffer overflow in &man.tcpdump.1;, which could be triggered by
      badly-formed NFS packets, has been fixed.  See security advisory
      <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:29.tcpdump.asc">FreeBSD-SA-02:29</ulink>
      for more details.</para>

    <para>&new.461; &man.ktrace.1; can no longer trace the operation of formerly
      privileged processes; this prevents the leakage of sensitive
      information that the process could have obtained before
      abandoning its privileges.  For a discussion of this issue, see
      security advisory
      <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:30.ktrace.asc">FreeBSD-SA-02:30</ulink>
      for more details.</para>

    <para>&new.462; A race condition in &man.pppd.8;, which could be used to
      change the permissions of an arbitrary file, has been corrected.
      For more information, see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:32.pppd.asc">FreeBSD-SA-02:32</ulink>.</para>

    <para>&new.462; Multiple buffer overflows in
      <application>OpenSSL</application> have been corrected, by way
      of an upgrade to the base system version of
      <application>OpenSSL</application>.  More details can be found
      in security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:33.openssl.asc">FreeBSD-SA-02:33</ulink>.</para>

    <para>&new.462; A heap buffer overflow in the XDR decoder has been fixed.
      For more details, see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:34.rpc.asc">FreeBSD-SA-02:34</ulink>.</para>

  </sect2>

  <sect2 id="userland">
    <title>Userland Changes</title>

    <para>&man.atacontrol.8; has been added to control various aspects
      of the &man.ata.4; driver.</para>

    <para>On ATAPI CDROM drives, &man.cdcontrol.1; now supports a
      <literal>speed</literal> command to set the maximum speed to be
      used by the drive.</para>

    <para>&man.ctags.1; no longer creates a corrupt tags file if the
      source file used <literal>//</literal> (C++-style)
      comments.</para>

    <para>&man.dump.8; now supplies progress information in its
      process title, useful for monitoring automated backups.</para>

    <para><filename>/etc/rc.firewall</filename> and
      <filename>/etc/rc.firewall6</filename> will no longer add their own
      hardcoded rules in the cases of a rules file in the
      <varname>firewall_type</varname> variable or a non-existent
      firewall type.  (The motivation for this change is to avoid
      acting on assumptions about a site's firewall policies.)  In
      addition, the <literal>closed</literal> firewall type now works
      as documented in the &man.rc.firewall.8; manual page.</para>

    <para>The functionality of <filename>/etc/security</filename> has
      been been moved into a set of scripts under the &man.periodic.8;
      framework, to make local customization easier and more
      maintainable.  These scripts now reside in
      <filename>/etc/periodic/security/</filename>.</para>

    <para>The <option>ether</option> address family of
      &man.ifconfig.8; has been changed to a more generic
      <option>link</option> family (<option>ether</option> is still
      accepted for backwards compatability).</para>

    <para>&man.fsdb.8; now supports a <literal>blocks</literal>
      command to list the blocks allocated by a particular
      inode.</para>

    <para>&man.ispppcontrol.8; has been deleted, and its functionality
      has been folded into &man.spppcontrol.8;.</para>

    <para>&man.k5su.8; is no longer installed SUID
      <username>root</username> by default.  Users requiring this
      feature can either manually change the permissions on the
      &man.k5su.8; executable or add
      <literal>ENABLE_SUID_K5SU=yes</literal> to
      <filename>/etc/make.conf</filename> before a source
      upgrade.</para>

    <para>&man.ldd.1; can now be used on shared libraries, in addition
      to executables.</para>

    <para>&man.last.1; now supports a <option>-y</option> flag, which
      causes the year to be included in the session start time.</para>

    <para><filename>libstand</filename> now has support for loading
      large kernels and modules split across several physical
      media.</para>

    <para><filename>libusb</filename> has been renamed as
      <filename>libusbhid</filename>, following NetBSD's naming
      conventions.</para>

    <para>&man.lpd.8; now recognizes the <option>-s</option> flag as
      the preferred synonym for <option>-p</option> (these flags
      cause &man.lpd.8; not to open a socket for network print
      jobs).</para>

    <para>&man.lpd.8; now implements a new <literal>rc</literal>
      printcap option.  When specified in a print queue for a remote
      host, boolean option causes &man.lpd.8; to resend the data file
      for each copy the user requested via <command>lpr
      -#<replaceable>n</replaceable></command>.</para>

    <para>&man.ls.1; now accepts a <option>-h</option> flag, which
      when combined with the <option>-l</option> flag, causes file
      sizes to be printed with unit suffixes, such that the number of
      digits printed is fewer than four.</para>

    <para>&man.m4.1; now accepts a <option>-s</option> flag to cause
      it to emit <literal>#line</literal> directives for use by
      &man.cpp.1;.</para>

    <para>&man.mergemaster.8; now supports two new flags.
      The <option>-p</option> flag enables a
      <quote>pre-<literal>buildworld</literal></quote> mode to compare files
      known to be essential to the success of the
      <literal>buildworld</literal> and
      <literal>installworld</literal> system updating steps.  The
      <option>-C</option> flag, used after a successful
      &man.mergemaster.8; run, compares options in
      <filename>/etc/rc.conf</filename> to the default options in
      <filename>/etc/defaults/rc.conf</filename>.</para>

    <para>&man.ngctl.8; now supports a <option>write</option> command
      to send a data packet down a given hook.</para>

    <para>&man.patch.1; now accepts a <option>-i</option> command-line
      flag to read a patch from a file, rather than standard
      input.</para>

    <para>&new.461; &man.pam.opie.8; no longer emits fake challenges when the
      <varname>no_fake_prompts</varname> variable is
      specified.</para>

    <para>&new.461; A &man.pam.opieaccess.8; module has been added.</para>

    <para>&new.461; &man.pam.radius.8;, &man.pam.ssh.8;, and &man.pam.tacplus.8;
      have been synchronized with the versions in &os; -CURRENT as of 3
      July 2002.</para>

    <para>A &man.pam.ssh.8; module has been added to allow the use of
      SSH passphrases and keypairs for authentication.  This module
      also handles session management by invoking
      &man.ssh-agent.1;.</para>

    <para>&new.461; &man.pam.unix.8; has been synchronized with the version in
      &os; -CURRENT as of 9 March 2002
      (pre-<application>OpenPAM</application>).</para>

    <para>&man.pr.1; now supports the <option>-f</option> and
      <option>-p</option> flags to pause output going to a
      terminal.</para>

    <para>The <option>-W</option> option to &man.ps.1; (to extract
      information from a specified swap device) has been useless for
      some time; it has been removed.</para>

    <para>&man.reboot.8; now takes a <option>-k</option> to specify
      the next kernel to boot.</para>

    <para>&man.sshd.8; no longer emits fake S/Key challenges for users
      who do not have S/Key enabled.  The prior behavior created
      confusing, useless one-time-password prompts when using some
      newer SSH clients to connect to a &os; system.</para>

    <para>&man.sysinstall.8; now has rudimentary support for
      retrieving packages from the correct volume of a multiple-volume
      installation (such as a multi-CD distribution).</para>

    <para>&man.tftp.1; and &man.tftpd.8; now support IPv6.</para>

    <para>The &man.usbhidctl.1; utility has been added to manipulate
      USB Human Interface Devices.</para>

    <para>&man.uuencode.1; and &man.uudecode.1; now accept a <option>-o</option> option to
      set their output files.  &man.uuencode.1; can now be made to do base64 encoding
      when given the <option>-m</option> flag, while &man.uudecode.1;
      can now automatically decode base64 files.</para>

    <para>&man.watch.8; now takes a <option>-f</option> option to
      specify a &man.snp.4; device to use.</para>

<!-- Above this line, order userland changes by manpage/variable name-->

    <para>Locales with names of the form <literal>*.EUC</literal> have
      been renamed to the form <literal>*.euc??</literal>.  For
      example, <literal>ja_JP.EUC</literal> has become
      <literal>ja_JP.eucJP</literal>.  This improves locale name
      compatability with &os; CURRENT, X11R6, and a number of
      other UNIX versions.</para>

    <para>The locale support was synchronized with the code from &os;
      -CURRENT.  This change brings support for the
      <literal>LC_NUMERIC</literal>, <literal>LC_MONETARY</literal>,
      and <literal>LC_MESSAGES</literal> categories, as well as
      improvements to &man.strftime.3;, revised locale definitions,
      and improvement of the localization of many base system
      programs.</para>

    <sect3>
      <title>Contributed Software</title>

      <para>&new.461; <application>BIND</application> has been updated to
	8.3.3.</para>

      <para><application>bzip2</application> has been updated to
	1.0.2.</para>

      <para><application>Heimdal Kerberos</application> has been updated to
	0.4e.</para>

      <para>The <application>ISC DHCP</application> client has been
	updated to 3.0.1RC8.</para>

      <para>&new.461; <application>OpenSSH</application> has been updated to
	version 3.4p1.  Among the changes:
	  <itemizedlist>
	    <listitem>
	      <para>The <filename>*2</filename> files are obsolete
		(for example,
		<filename>~/.ssh/known_hosts</filename> can hold the
		contents of
		<filename>~/.ssh/known_hosts2</filename>).</para>
	    </listitem>

	    <listitem>
	      <para>&man.ssh-keygen.1; can import and export keys using
		the SECSH Public Key File Format, for key exchange
		with several commercial SSH implementations.</para>
	    </listitem>

	    <listitem>
	      <para>&man.ssh-add.1; now adds all three default keys.</para>
	    </listitem>

	    <listitem>
	      <para>&man.ssh-keygen.1; no longer defaults to a
		specific key type; one must be specified with the
		<option>-t</option> option.</para>
	    </listitem>

	    <listitem>
	      <para>A <quote>privilege separation</quote> feature,
		which uses unprivileged processes to contain and
		restrict the effects of future compromises or
		programming errors.</para>
	    </listitem>

	    <listitem>
	      <para>Several bugfixes, including closure of a
		security hole that could lead to an integer overflow
		and undesired privilege escalation.</para>
	    </listitem>

	  </itemizedlist>

	  <note>
	    <para>As with &os; &release.base;, <literal>Protocol
	      1,2</literal> remains the default protocol setting in
	      <filename>/etc/ssh/ssh_config</filename>.  In &os;
	      -CURRENT (and &os; &release.branch; as of this writing),
	      the default is <literal>Protocol 2,1</literal>.</para>
	  </note>

	</para>

      <para>&new.461; <application>OpenSSL</application> has been updated to
	0.9.6e.</para>

      <para><application>texinfo</application> has been updated to
	4.1.</para>

      <para>The timezone database has been updated to the
	<filename>tzdata2002c</filename> release.</para>

      <sect4>

	<title>Sendmail</title>

	<para><application>sendmail</application> has been updated to
	  8.12.3.  &man.sendmail.8; is no longer installed as a
	  set-user-ID <username>root</username> binary (now set-group-ID <groupname>smmsp</groupname>).
	  See <filename>/usr/src/contrib/sendmail/RELEASE_NOTES</filename>
	  and <filename>/etc/mail/README</filename> for more
	  information.</para>

	<para>With this 
	  <application>sendmail</application> upgrade, multiple
	  <application>sendmail</application> daemons (some required
	  to handle outgoing mail) are started by &man.rc.8;, even if
	  the <varname>sendmail_enable</varname> variable is set to
	  <literal>NO</literal>.  To completely disable
	  <application>sendmail</application>,
	  <varname>sendmail_enable</varname> must be set to
	  <literal>NONE</literal>.  Alternatively, for systems using a
	  different MTA, the <varname>mta_start_script</varname> variable can
	  be used to point to a different startup script (more details
	  can be found in &man.rc.sendmail.8;).</para>

	<para>The permissions for <application>sendmail</application>
	  alias and map databases built via
	  <filename>/etc/mail/Makefile</filename> now default to mode
	  0640 to protect against a file locking local denial of service.
	  It can be changed by setting the new
	  <varname>SENDMAIL_MAP_PERMS</varname>
	  <filename>make.conf</filename> option.</para>

	<para>The permissions for the <application>sendmail</application>
	  statistics file, <filename>/var/log/sendmail.st</filename>, have
	  been changed from mode 0644 to mode 0640 to protect against
	  a file locking local denial of service.</para>

	<para>&new.461; A potential DNS map buffer overflow bug (in
	  code that is not used in configurations by default) has been
	  fixed.
	  <note>
	    <para>This bug has been addressed in &os; 4.6-STABLE by
	      the import of a newer version of
	      <application>sendmail</application>.</para>
	  </note>

      </sect4>

    </sect3>

    <sect3>
      <title>Ports/Packages Collection</title>

      <para>The Ports Collection infrastructure now uses
        <application>XFree86</application> 4.2.0 as the default version
        of the X Window System for the purposes of satisfying
        dependencies.  To return to using
        <application>XFree86</application> 3.3.6, add the following line
        to <filename>/etc/make.conf</filename>:</para>

      <programlisting>XFREE86_VERSION=3</programlisting>

    </sect3>
  </sect2>

  <sect2>
    <title>Release Engineering and Integration</title>

    <para arch="i386,alpha"><application>XFree86</application> 4.2.0
      is now the default version of the X Window System supported by
      &man.sysinstall.8;.  It installs
      <application>XFree86</application> as a set of standard binary
      packages, so the usual package utilities such as
      &man.pkg.info.1; can be used to examine/manipulate its
      components.</para>

    <para>&new.461; A bug that caused <filename>/usr/share/examples</filename>
      to be incompletely populated on fresh installs has been
      fixed.</para>

  </sect2>
</sect1>

<sect1>
  <title>Upgrading from previous releases of &os;</title>

  <para>If you're upgrading from a previous release of &os;, you
    generally will have three options:

    <itemizedlist>
      <listitem>
	<para>Using the binary upgrade option of &man.sysinstall.8;.
	  This option is perhaps the quickest, although it presumes
	  that your installation of &os; uses no special compilation
	  options.</para>
      </listitem>
      <listitem>
	<para>Performing a complete reinstall of &os;.  Technically,
	  this is not an upgrading method, and in any case is usually less
	  convenient than a binary upgrade, in that it requires you to
	  manually backup and restore the contents of
	  <filename>/etc</filename>.  However, it may be useful in
	  cases where you want (or need) to change the partitioning of
	  your disks.
      </listitem>
      <listitem>
	<para>From source code in <filename>/usr/src</filename>.  This
	  route is more flexible, but requires more disk space, time,
	  and technical expertise.  More information can be found
	  in the <ulink
	  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/makeworld.html"><quote>Using
	  <command>make world</command></quote></ulink> section of the <ulink
	  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
	  Handbook</ulink>.  Upgrading from very old
	  versions of &os; may be problematic; in cases like this, it
	  is usually more effective to perform a binary upgrade or a
	  complete reinstall.</para>
      </listitem>
    </itemizedlist>
  </para>

  <para>Please read the <filename>INSTALL.TXT</filename> file for more
    information, preferably <emphasis>before</emphasis> beginning an
    upgrade.  If you are upgrading from source, please be sure to read
    <filename>/usr/src/UPDATING</filename> as well.</para>

  <para>Finally, if you want to use one of various means to track the
    -STABLE or -CURRENT branches of &os;, please be sure to consult
    the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/current-stable.html"><quote>-CURRENT
    vs. -STABLE</quote></ulink> section of the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
    Handbook</ulink>.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
</sect1>

