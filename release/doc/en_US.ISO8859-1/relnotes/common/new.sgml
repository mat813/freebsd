<articleinfo>
  <title>&os;/&arch; &release.current; Release Notes</title>

  <corpauthor>The &os; Project</corpauthor>

  <pubdate>$FreeBSD$</pubdate>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <year>2003</year>
    <year>2004</year>
    <year>2005</year>
    <year>2006</year>
    <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
  </copyright>

  <legalnotice id="trademarks" role="trademarks">
    &tm-attrib.freebsd;
    &tm-attrib.ibm;
    &tm-attrib.ieee;
    &tm-attrib.intel;
    &tm-attrib.sparc;
    &tm-attrib.general;
  </legalnotice>

  <abstract>
    <para>The release notes for &os; &release.current; contain a summary
      of the changes made to the &os; base system on the
      &release.branch; development line.
      This document lists applicable security advisories that were issued since
      the last release, as well as significant changes to the &os;
      kernel and userland.
      Some brief remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1 id="intro">
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current; on the &arch.print; hardware platform.  It
    describes recently added, changed, or deleted features of &os;.
    It also provides some notes on upgrading
    from previous versions of &os;.</para>

<![ %release.type.current [

  <para>The &release.type; distribution to which these release notes
    apply represents the latest point along the &release.branch; development
    branch since &release.branch; was created.  Information regarding pre-built, binary
    &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.snapshot [

  <para>The &release.type; distribution to which these release notes
    apply represents a point along the &release.branch; development
    branch between &release.prev; and the future &release.next;.
    Information regarding
    pre-built, binary &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.release [

  <para>This distribution of &os; &release.current; is a
    &release.type; distribution.  It can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="&url.books.handbook;/mirrors.html"><quote>Obtaining
    &os;</quote> appendix</ulink> to the <ulink
    url="&url.books.handbook;/">&os;
    Handbook</ulink>.</para>

]]>

  <para>All users are encouraged to consult the release errata before
    installing &os;.  The errata document is updated with
    <quote>late-breaking</quote> information discovered late in the
    release cycle or after the release.  Typically, it contains
    information on known bugs, security advisories, and corrections to
    documentation.  An up-to-date copy of the errata for &os;
    &release.current; can be found on the &os; Web site.</para>

</sect1>

<sect1 id="new">
  <title>What's New</title>

  <para>This section describes
    the most user-visible new or changed features in &os;
    since &release.prev;.
  </para>

  <para>Typical release note items
    document recent security advisories issued after
    &release.prev;,
    new drivers or hardware support, new commands or options,
    major bug fixes, or contributed software upgrades.  They may also
    list changes to major ports/packages or release engineering
    practices.  Clearly the release notes cannot list every single
    change made to &os; between releases; this document focuses
    primarily on security advisories, user-visible changes, and major
    architectural improvements.</para>

  <sect2 id="security">
    <title>Security Advisories</title>

    <para>A bug in &man.ypserv.8;, which effectively disabled the
      <filename>/var/yp/securenets</filename> access control mechanism,
      has been corrected.  More details are available in security
      advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-06:15.ypserv.asc">FreeBSD-SA-06:15.ypserv</ulink>.</para>

    <para>A bug in the smbfs file system, which could allow an
      attacker to escape out of &man.chroot.2 environments on an smbfs
      mounted filesystem, has been fixed.  For more details, see
      security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-06:16.smbfs.asc">FreeBSD-SA-06:16.smbfs</ulink>.</para>

    <para>A potential denial of service problem in &man.sendmail.8;
      caused by excessive recursion which leads to stack
      exhaustion when attempting delivery of a malformed
      MIME message, has been fixed.  For more details,
      see security advisory <ulink
      url="http://security.FreeBSD.org/advisories/FreeBSD-SA-06:17.sendmail.asc">FreeBSD-SA-06:17.sendmail</ulink>.</para>
  </sect2>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

    <para arch="amd64,i386">Instead of including all of physical
      memory in a kernel crash dump, the kernel now defaults to
      dumping only pages that are actively mapped into kernel virtual
      memory.  This functionality requires that the new
      <varname>debug.minidump</varname> sysctl variable be set to
      <literal>1</literal>.</para>

    <para>A bug has been fixed in the statistics-keeping code in the
      kernel's UMA memory allocator.  This caused a count of memory
      allocation failures (as shown by <command>netstat -m</command>)
      to increase erroneously.</para>

    <!-- Above this line, sort kernel changes by manpage/keyword-->

    <sect3 id="boot">
      <title>Boot Loader Changes</title>

      <!-- Above this line, order boot loader changes by keyword-->

      <para arch="pc98">A bootable CDROM loader has been implemented
	for the pc98 platform.</para>

    </sect3>

    <sect3 id="proc">
      <title>Hardware Support</title>

      <para arch="i386">Support has been improved for
	so-called <quote>legacy-free</quote> hardware, in particular,
	i386 systems without AT-style keyboard controllers such as the
	Macbook Pro.</para>

      <para arch="i386,amd64">&man.ipmi.4;, an OpenIPMI compatible driver,
	has been added.
	OpenIPMI (Intelligent Platform Management Interface) is an open
	standard designed to enable remote monitoring and control of server,
	networking and telecommunication platforms.</para>

      <para>The &man.padlock.4; driver now supports the cryptographic
	functionality of the VIA C7 processor.</para>

      <sect4 id="mm">
	<title>Multimedia Support</title>

	<para></para>
      </sect4>

      <sect4 id="net-if">
	<title>Network Interface Support</title>

	<para>The &man.ath.4; driver has been updated to
	  HAL version 0.9.17.2.</para>

	<para arch="alpha,amd64,i386,sparc64">The &man.ath.4;, &man.ath.hal.4;, and
	  <literal>ath_rate_sample</literal> drivers have been
	  included in the <filename>GENERIC</filename> kernel by
	  default.</para>

	<para>A number of improvements and bugfixes have been made to the
	  functionality of the &man.iwi.4; driver.  This driver now
	  requires the firmware image in the 
	  <filename role="package">net/iwi-firmware-kmod</filename>
	  port/package; prior versions of this driver used the
	  <filename role="package">net/iwi-firmware</filename>
	  port/package.</para>

	<para>The &man.my.4; driver now has &man.altq.4; support.</para>

	<para>The &man.nve.4; driver now has &man.altq.4; support.</para>

	<para>The &man.sk.4; driver is now MPSAFE.</para>
      </sect4>
    </sect3>

    <sect3 id="net-proto">
      <title>Network Protocols</title>

      <para>The &man.enc.4; IPsec filtering pseudo-device has been
	added.  It allows firewall packages using the &man.pfil.9;
	framework to examine (and filter) IPsec traffic before
	outbound encryption and after inbound decryption.</para>

      <para>&os; &release.prev; contained a bug in the IPv6
	implementation, which caused spurious error messages to be
	printed for point-to-point interfaces.  This problem has been
	corrected.</para>
    </sect3>

    <sect3 id="disks">
      <title>Disks and Storage</title>

      <para></para>
    </sect3>

    <sect3 id="fs">
      <title>File Systems</title>

      <para>The &man.linsysfs.5; pseudo-filesystem driver has been
	added.  It provides a subset of the
	Linux <filename>sys</filename> filesystem, and is required for
	the correct operation of some Linux binaries (such as the LSI
	MegaRAID SAS utility).</para>

      <para>A deadlock observed when both quotas and snapshots were in
	use on a file system on &os; &release.prev; has been
	corrected.</para>

      <para>A performance regression with NFS servers running &os;
	&release.prev;, caused by a leak of the Giant kernel lock, has
	been fixed.</para>
    </sect3>

  </sect2>

  <sect2 id="userland">
    <title>Userland Changes</title>

    <para>The &man.asf.8; utility has been revised and extended.  Now
      it can operate via several interfaces including &man.kvm.3;,
      which supports not only live systems, but also kernel crash dumps.</para>

    <para>The &man.csup.1; utility has been imported.
      This is an implementation of a CVSup-compatible client written
      in the C language.  Note that it currently supports checkout mode
      only.</para>

    <para>The &man.dhclient.8; program now sends the host's name in
      DHCP requests if it is not specified in the configuration
      file.</para>

    <para>The &man.du.1; program now supports a <option>-n</option>
      flag, which causes it to ignore files and directories with
      the <literal>nodump</literal> flag set.</para>

    <para>The &man.find.1; program now supports <option>-Btime</option>
      and other related primaries, which can be used to create expressions
      based on a file's creation time.</para>

    <para>The &man.getent.1; utility has been imported from NetBSD.
      It retrieves and displays information from an administrative
      database (such as <filename>hosts</filename>) using the lookup
      order specified in &man.nsswitch.conf.5;.</para>

    <para>The &man.iostat.8; utility now supports
      a <option>-x</option> flag (inspired by Solaris) to print
      extended disk statistics.  If the new <option>-z</option> flag is
      also specified, no output is made for disks with no
      activity.</para>

    <para>The &man.jail.8; program now supports a <option>-s</option>
      option to specify a jail's securelevel.</para>

    <para>The &man.jexec.8; utility now supports <option>-u</option>
      and <option>-U</option> flags to specify username credentials
      under which a command should be executed.</para>

    <para>The &man.ls.1; utility now supports
      an <option>-U</option> flag to use the file creation
      time for sorting.</para>

    <para>An extensible implementation of &man.printf.3;, compatible
      with GLIBC, has been added to <filename>libc</filename>.  It is
      only used if the environment variable
      <varname>USE_XPRINTF</varname> is defined, one of the extension
      functions is called, or the global variable
      <varname>__use_xprintf</varname> is set to a value greater than
      <literal>0</literal>.  Five extensions are currently supported:
      <literal>%H</literal> (hex dump),
      <literal>%T</literal> (<varname>time_t</varname> and
      time-related structures),
      <literal>%M</literal> (errno message),
      <literal>%Q</literal> (double-quoted, escaped string),
      <literal>%V</literal> (&man.strvis.3;-format string),
      </para>

    <para>The DNS resolver library in &os;'s <application>libc</application>
      has been updated to BIND9's one.</para>

    <para>The &man.tail.1; utility now supports a <option>-q</option>
      flag to suppress header lines when multiple files are
      specified.</para>

    <sect3 id="rc-scripts">
      <title><filename>/etc/rc.d</filename> Scripts</title>

      <para>A bug in the <filename>rc.d/jail</filename> startup
        script, which caused a number of problems for users attempting
        to use jails on &os; &release.prev;, has been
        corrected.</para>
    </sect3>
  </sect2>

  <sect2 id="contrib">
    <title>Contributed Software</title>

    <para><application>sendmail</application> has been updated from
      8.13.6 to 8.13.8.</para>

    <para>The timezone database has been updated from the
      <application>tzdata2005r</application> release to the
      <application>tzdata2006g</application> release.</para>
  </sect2>

  <sect2 id="ports">
    <title>Ports/Packages Collection Infrastructure</title>

    <para>&man.pkg.add.1; now supports an <option>-F</option>
      flag to disable checking whether the same package is already
      installed or not.</para>
  </sect2>

  <sect2 id="releng">
    <title>Release Engineering and Integration</title>

    <para>The &man.sysinstall.8; utility now displays the running &os;
      version in menu titles.</para>

    <para>A <filename>/media</filename> directory has been
      added to contain mount points for removable media
      such as CDROMs, floppy disks, USB drives, and so on.</para>

    <para>The supported version of
      the <application>GNOME</application> desktop environment
      (<filename role="package">x11/gnome2</filename>) has been
      updated from 2.12.3 to 2.14.2.</para>

    <para>The supported version of
      the <application>KDE</application> desktop environment
      (<filename role="package">x11/kde3</filename>) has been
      updated from 3.5.1 to 3.5.3.</para>

    <para arch="i386,amd64">The supported Linux emulation now uses the
      libraries in the
      <filename role="package">emulators/linux_base-fc4</filename>
      package.</para>

  </sect2>

  <sect2 id="doc">
    <title>Documentation</title>

    <para>The manual pages for <application>NTP</application>
      have been updated to 4.2.0, to match the version of
      code actually included in &os;.</para>

    <para>Documentation of existing functionality has been improved by
      the addition of the following manual pages:
      &man.sysctl.9;.</para>

  </sect2>
</sect1>

<sect1 id="upgrade">
  <title>Upgrading from previous releases of &os;</title>

  <para>Source upgrades to &os; &release.current; are only supported
    from &os; 5.3-RELEASE or later.  Users of older systems wanting to
    upgrade &release.current; will need to update to &os; 5.3 or newer
    first, then to &os; &release.current;.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
</sect1>
