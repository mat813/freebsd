<articleinfo>
  <title>&os;/&arch; &release.current; Release Notes</title>

  <corpauthor>The &os; Project</corpauthor>

  <pubdate>$FreeBSD$</pubdate>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <year>2003</year>
    <year>2004</year>
    <year>2005</year>
    <year>2006</year>
    <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
  </copyright>

  <legalnotice id="trademarks" role="trademarks">
    &tm-attrib.freebsd;
    &tm-attrib.ibm;
    &tm-attrib.ieee;
    &tm-attrib.intel;
    &tm-attrib.sparc;
    &tm-attrib.general;
  </legalnotice>

  <abstract>
    <para>The release notes for &os; &release.current; contain a summary
      of the changes made to the &os; base system since &release.prev;.
      This document lists applicable security advisories that were issued since
      the last release, as well as significant changes to the &os;
      kernel and userland.
      Some brief remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1 id="intro">
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current; on the &arch.print; hardware platform.  It
    describes recently added, changed, or deleted features of &os;.
    It also provides some notes on upgrading
    from previous versions of &os;.</para>

<![ %release.type.snapshot [

  <para>The &release.type; distribution to which these release notes
    apply represents a point along the &release.branch; development
    branch between &release.prev; and the future &release.next;.
    Information regarding
    pre-built, binary &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.release [

  <para>This distribution of &os; &release.current; is a
    &release.type; distribution.  It can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="&url.books.handbook;/mirrors.html"><quote>Obtaining
    &os;</quote> appendix</ulink> to the <ulink
    url="&url.books.handbook;/">&os;
    Handbook</ulink>.</para>

]]>

  <para>All users are encouraged to consult the release errata before
    installing &os;.  The errata document is updated with
    <quote>late-breaking</quote> information discovered late in the
    release cycle or after the release.  Typically, it contains
    information on known bugs, security advisories, and corrections to
    documentation.  An up-to-date copy of the errata for &os;
    &release.current; can be found on the &os; Web site.</para>

</sect1>

<sect1 id="new">
  <title>What's New</title>

  <para>This section describes
    the most user-visible new or changed features in &os;
    since &release.prev;.
    In general, changes described here are unique to the &release.branch;
    branch unless specifically marked as &merged; features.
  </para>

  <para>Typical release note items
    document recent security advisories issued after
    &release.prev;,
    new drivers or hardware support, new commands or options,
    major bug fixes, or contributed software upgrades.  They may also
    list changes to major ports/packages or release engineering
    practices.  Clearly the release notes cannot list every single
    change made to &os; between releases; this document focuses
    primarily on security advisories, user-visible changes, and major
    architectural improvements.</para>

  <sect2 id="security">
    <title>Security Advisories</title>

    <para arch="i386,amd64">Because of an information disclosure vulnerability on
      processors using Hyper-Threading Technology (HTT), the
      <varname>machdep.hyperthreading_allowed</varname> sysctl
      variable has been added.  It defaults to <literal>1</literal>
      (HTT enabled) on &os; CURRENT, and <literal>0</literal> (HTT
      disabled) on the 4-STABLE and 5-STABLE development branches and
      supported security fix branches.  More information can be found
      in security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:09.htt.asc">FreeBSD-SA-05:09.htt</ulink>.
      </para>

    <para>A bug in the &man.tcpdump.1; utility which allows
      a malicious remote user to cause a denial-of-service
      by using specially crafted packets, has been fixed.
      For more information, see security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:10.tcpdump.asc">FreeBSD-SA-05:10.tcpdump</ulink>.
      </para>

    <para>Two problems in the &man.gzip.1; utility have been fixed.
      These may allow a local user to modify permissions
      of arbitrary files and overwrite arbitrary local
      files when uncompressing a file.
      For more information, see security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:11.gzip.asc">FreeBSD-SA-05:11.gzip</ulink>.
      </para>

    <para>A bug has been fixed in &man.ipfw.4; that could cause
      packets to be matched incorrectly against a lookup table.  This
      bug only affects SMP machines or UP machines that have the
      <literal>PREEMPTION</literal> kernel option enabled.  More
      information is contained in security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:13.ipfw.asc">FreeBSD-SA-05:13.ipfw</ulink>.
      </para>

    <para>Two security-related problems have been fixed in
      &man.bzip2.1;.  These include a potential denial of service and
      unauthorized manipulation of file permissions.  For more
      information, see security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:14.bzip2.asc">FreeBSD-SA-05:14.bzip2</ulink>.
      </para>

    <para>Two problems in &os;'s TCP stack have been fixed.  They
      could allow attackers to stall existing TCP connections,
      creating a denial-of-service situation.  More information is
      contained in security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:15.tcp.asc">FreeBSD-SA-05:15.tcp</ulink>.
      </para>

    <para>Two buffer overflows in the zlib library has been corrected.
      More information can be found in security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:16.zlib.asc">FreeBSD-SA-05:16.zlib</ulink>
      and
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:18.zlib.asc">FreeBSD-SA-05:18.zlib</ulink>.</para>

    <para>A security vulnerability that could allow processes running
      inside a &man.jail.2; to gain access to hidden &man.devfs.5;
      file nodes has been corrected, as described in security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:17.devfs.asc">FreeBSD-SA-05:17.devfs</ulink>.</para>

    <para>A programming error in the &man.ipsec.4; implementation,
      which resulted in AES-XCBC-MAC authentication using a constant
      key, has been corrected.  More details are in security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:19.ipsec.asc">FreeBSD-SA-05:19.ipsec</ulink>.</para>

    <para>A temporary file vulnerability in &man.cvsbug.8;, which
      could allow an attacker to modify or overwrite files with the
      permissions of a user running the &man.cvsbug.8; utility, has
      been fixed.  More details can be found in security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:20.cvsbug.asc">FreeBSD-SA-05:20.cvsbug</ulink>.</para>

    <para>A bug in OpenSSL that could allow an attacker to force an
      use older version of the SSL (with known weakensses) has been
      corrected.  Details can be found in security advisory
      <ulink url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:21.openssl.asc">FreeBSD-SA-05:21.openssl</ulink>.</para>

    <para>A temporary file vulnerability in &man.texindex.1;, which
      could allow a local attacker to overwrite files in the context
      of a user running the &man.texindex.1; utility, has been fixed.
      For more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:01.texindex.asc">FreeBSD-SA-06:01.texindex</ulink>.</para>

    <para>A temporary file vulnerability in the &man.ee.1; text
      editor, which could allow a local attacker to overwrite files in
      the context of a user running &man.ee.1;, has been fixed.  For
      more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:02.ee.asc">FreeBSD-SA-06:02.ee</ulink>.</para>

    <para>Several vulnerabilities in the &man.cpio.1; utility have
      been corrected.  For more
      details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:03.cpio.asc">FreeBSD-SA-06:03.cpio</ulink>.</para>

    <para>Two instances in which portions of kernel memory could be
      disclosed to users have been fixed.  For more details see
      security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:06.kmem.asc">FreeBSD-SA-06:06.kmem</ulink>.</para>

    <para>A logic bug in the IP fragment handling in &man.pf.4;, which
      could cause a crash under certain circumstances, has been fixed.
      For more details see security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:07.pf.asc">FreeBSD-SA-06:07.pf</ulink>.</para>

    <para>An error in Selective Acknowledgement (SACK) support in the
      TCP/IP stack, which could cause an infinite loop upon reception
      of a particular series of packets, has been corrected.  More
      details are contained in security advisory <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-06:08.sack.asc">FreeBSD-SA-06:08.sack</ulink>.</para>

  </sect2>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

    <para></para>

    <!-- Above this line, sort kernel changes by manpage/keyword-->

    <para></para>

    <sect3 id="boot">
      <title>Boot Loader Changes</title>

      <para>The <command>autoboot</command> command will now prevent the user
	from interrupting the boot process at all if the
	<varname>autoboot_delay</varname> variable is set to
	<literal>-1</literal>.</para>

    </sect3>

    <sect3 id="proc">
      <title>Hardware Support</title>

      <para arch="i386,pc98">The &man.ce.4; driver has been added to
        support Cronyx Tau32-PCI adapters.
        </para>

      <para></para>

      <sect4 id="mm">
	<title>Multimedia Support</title>

	<para>The &man.uaudio.4; driver now has some added
	  functionality, including volume control on more inputs and
	  recording capability on some devices.</para>

	<para></para>

      </sect4>

      <sect4 id="net-if">
	<title>Network Interface Support</title>

	<para>The &man.bge.4; driver now supports the BCM5714 and 5789
	  chips.</para>

	<para>The &man.ixgb.4; driver is now MPSAFE.</para>

	<para arch="i386,amd64">Drivers using the &man.ndis.4; device
	  driver wrapper mechanism are now built and loaded
	  differently.  The &man.ndis.4; driver can now be pre-built
	  as module or statically compiled into a kernel.  Individual
	  drivers can now be built with the &man.ndisgen.8; utility;
	  the result is a kernel module that can be loaded into a
	  running kernel using &man.kldload.8;.</para>

	<para>The &man.xl.4; driver now supports &man.polling.4;</para>

      </sect4>
    </sect3>

    <sect3 id="net-proto">
      <title>Network Protocols</title>

      <para></para>

    </sect3>

    <sect3 id="disks">
      <title>Disks and Storage</title>

      <para></para>

    </sect3>

    <sect3 id="fs">
      <title>File Systems</title>

      <para></para>

    </sect3>

    <sect3>
      <title>Contributed Software</title>

      <para></para>

    </sect3>
  </sect2>

  <sect2 id="userland">
    <title>Userland Changes</title>

    <para>The &man.gethostbyname.3;, &man.gethostbyname2.3;, and
      &man.gethostbyaddr.3; functions are now thread-safe.</para>

    <para>The &man.getnetent.3;, &man.getnetbyname.3;, and
      &man.getnetbyaddr.3; functions are now thread-safe.</para>

    <para>The &man.getprotoent.3;, &man.getprotobyname.3;, and
      &man.getprotobynumber.3; functions are now thread-safe.</para>

    <para>The &man.getservent.3;, &man.getservbyname.3;, and
      &man.getservbyport.3; functions are now thread-safe.</para>

    <para>The &man.kldstat.8; utility now supports a
      <option>-m</option> option to return the status of a specific
      kernel module.</para>

    <para>The default stack sizes in <filename>libpthread</filename>,
      <filename>libthr</filename>,
      and <filename>libc_r</filename> have been increased.  On 32-bit
      platforms, the main thread receives a 2MB stack size by default,
      with other threads receiving a 1MB stack size by default.  On
      64-bit platforms, the default stack sizes are 4MB and 2MB
      respectively.</para>

    <para>&man.sed.1; now supports a <option>-l</option> option to
      make its output line-buffered.</para>

    <sect3 id="rc-scripts">
      <title><filename>/etc/rc.d</filename> Scripts</title>

      <para>The <filename>rc.d/jail</filename> startup script
	now supports <varname>jail_<replaceable>name</replaceable>_flags</varname>
	variable which allows to specify &man.jail.8; flags.</para>

    </sect3>
  </sect2>

  <sect2 id="contrib">
    <title>Contributed Software</title>

    <para><application>BIND</application> has been updated from 9.3.1
      to 9.3.2.</para>

    <para><application>sendmail</application> has been updated from
      version 8.13.3 to version 8.13.4.</para>

    <para>The timezone database has been updated from the
      <application>tzdata2005g</application> release to the
      <application>tzdata2005r</application> release.</para>
  </sect2>

  <sect2 id="ports">
    <title>Ports/Packages Collection Infrastructure</title>

    <para>The &man.pkg.version.1; utility now supports a
      <option>-I</option> flag, which causes only the
      <filename>INDEX</filename> file to be used for determining if a
      package is out of date.</para>
  </sect2>

  <sect2 id="releng">
    <title>Release Engineering and Integration</title>

    <para>The supported version of
      the <application>GNOME</application> desktop environment
      (<filename role="package">x11/gnome2</filename>) has been
      updated from 2.10.2 to 2.12.3.</para>

    <para>The supported version of
      the <application>KDE</application> desktop environment
      (<filename role="package">x11/kde2</filename>) has been
      updated from 3.4.2 to 3.5.1.</para>

    <para>The supported version of
      the <application>Perl</application> interpreter
      (<filename role="package">lang/perl5.8</filename>) has been updated
      from 5.8.7 to 5.8.8.</para>

    <para>The supported version of
      the <application>&xorg;</application> windowing system
      (<filename role="package">x11/xorg</filename>) has been updated
      from 6.8.2 to 6.9.0.</para>
  </sect2>

  <sect2 id="doc">
    <title>Documentation</title>

    <para></para>

  </sect2>
</sect1>

<sect1 id="upgrade">
  <title>Upgrading from previous releases of &os;</title>

  <para>If you're upgrading from a previous release of &os;, you
    generally will have three options:

    <itemizedlist>
      <listitem>
	<para>Using the binary upgrade option of &man.sysinstall.8;.
	  This option is perhaps the quickest, although it presumes
	  that your installation of &os; uses no special compilation
	  options.</para>
      </listitem>
      <listitem>
	<para>Performing a complete reinstall of &os;.  Technically,
	  this is not an upgrading method, and in any case is usually less
	  convenient than a binary upgrade, in that it requires you to
	  manually backup and restore the contents of
	  <filename>/etc</filename>.  However, it may be useful in
	  cases where you want (or need) to change the partitioning of
	  your disks.</para>
      </listitem>
      <listitem>
	<para>From source code in <filename>/usr/src</filename>.  This
	  route is more flexible, but requires more disk space, time,
	  and technical expertise.  More information can be found
	  in the <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/makeworld.html"
	    ><quote>Using <command>make world</command></quote></ulink>
	  section of the <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/"
	    >FreeBSD Handbook</ulink>.  Upgrading from very old
	  versions of &os; may be problematic; in cases like this, it
	  is usually more effective to perform a binary upgrade or a
	  complete reinstall.</para>
      </listitem>
    </itemizedlist>
  </para>

  <para>Please read the <filename>INSTALL.TXT</filename> file for more
    information, preferably <emphasis>before</emphasis> beginning an
    upgrade.  If you are upgrading from source, please be sure to read
    <filename>/usr/src/UPDATING</filename> as well.</para>

  <para>Finally, if you want to use one of various means to track the
    -STABLE or -CURRENT branches of &os;, please be sure to consult
    the <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/current-stable.html"
      ><quote>-CURRENT vs. -STABLE</quote></ulink> section of the
    <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/"
      >FreeBSD Handbook</ulink>.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
</sect1>
