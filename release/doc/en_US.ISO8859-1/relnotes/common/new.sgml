<articleinfo>
  <title>&os;/&arch; &release.current; Release Notes</title>

  <pubdate>$FreeBSD$</pubdate>

  <corpauthor>The FreeBSD Project</corpauthor>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <holder role="mailto:doc@FreeBSD.org">The FreeBSD Documentation Project</holder>
  </copyright>

  <abstract>
    <para>The release notes for &os; &release.current; contain a
      summary of the changes made in the &os; base system since
      &release.prev;.  Both changes for kernel and userland are
      listed, as well as applicable security advisories for the base
      system that were issued since the last release.  Some brief
      remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1>
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current; on the &arch.print; hardware platform.  It
    describes new features of &os; that have been added (or changed)
    since &release.prev;.  It also provides some notes on upgrading
    from previous versions of &os;.</para>

<![ %release.type.snapshot [

  <para>The &release.type; distribution to which these release notes
    apply represents a point along the &release.branch; development
    branch between &release.prev; and the future &release.next;.  Some
    pre-built, binary &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.release [

  <para>This distribution of &os; &release.current; is a
    &release.type; distribution.  It can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="http://www.FreeBSD.org/handbook/mirrors.html"><quote>Obtaining
    FreeBSD</quote></ulink> appendix in the <ulink
    url="http://www.FreeBSD.org/handbook/">FreeBSD
    Handbook</ulink>.</para>

]]>
</sect1>

<!--
	The "What's New" section of the release notes. 

	Guidelines for new entries:

	1.  If there is some obvious "keyword" associated with an
	entry (such as a manpage entry or an application name), try to
	put it at the start of the sentence.

	2.  Within each subsection (i.e. kernel, security, userland),
	list items in alphabetical order by these keywords.

	Some entries will have no obvious keywords to help with
	ordering.  In sections containing these entries, put those
	containing (e.g.) manpage references first, then some
	suitable SGML comment line as a demarc, then the remaining
	entries.

-->

<sect1>
  <title>What's New</title>

  <para>This section describes the most user-visible new or changed
    features in &os; since &release.prev;.  Typical release note items
    document new drivers or hardware support, new commands or options,
    major bugfixes, or contributed software upgrades.  Security
    advisories for the base system that were issued after
    &release.prev; are also listed.</para>

  <para>Many additional changes were made to &os; that are not listed
    here for lack of space.  For example, documentation was corrected
    and improved, minor bugs were fixed, insecure coding practices
    were audited and corrected, and source code was cleaned up.</para>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

    <para arch="i386">The &man.puc.4; (PCI <quote>Universal</quote>
      Communications) driver has been added, to help connect PCI-based
      serial ports to the &man.sio.4; driver.</para>

    <para>The kernel dump device can now be set via the
      <varname>dumpdev</varname> loader tunable.  As a result, it is now
      possible to obtain crash dumps from panics during the late stages
      of kernel initialization (before the system enters into
      single-user mode).</para>

<!-- Above this line, kernel changes ordered by manpage/variable name -->

    <sect3>
      <title>Processor/Motherboard Support</title>

      <para></para>
    </sect3>

    <sect3>
      <title>Boot Loaders</title>

      <para></para>

<!-- Above this line, order boot loader changes by manpage/variable name-->

    </sect3>

    <sect3>
      <title>Network Interface Support</title>

      <para>The &man.an.4; driver now supports Cisco LEAP, as well as
        the <quote>Home</quote> WEP key.  The Linux Aironet
        utilities are now supported under emulation.</para>

      <para arch="i386">Generic support for ARCNET token-based
	networks has been added.</para>

      <para arch="i386">The cm driver has been added to support SMC
	COM90cx6 ARCNET network adapters.</para>

      <para>The &man.dc.4; driver now has support for VLANs.</para>

      <para>The &man.wi.4; driver now has support for Prism II and
	Prism 2.5-based NICs.  104/128-bit WEP now works on Prism
	cards.</para>

<!-- Above this line, order network driver changes by manpage/variable name-->

      <para>Selected network drivers now implement a
	semi-polling mode, which makes systems much more resilient to
	attacks and overloads.  To enable polling, the following options
	are required in a kernel configuration file:

	<programlisting>options DEVICE_POLLING
options HZ=1000 # not compulsory but strongly recommended</programlisting>

	The <varname>kern.polling.enable</varname> sysctl variable
	will then activate polling mode; with the
	<varname>kern.polling.user_frac</varname> sysctl indicating the
	percentage of CPU time to be reserved for userland.  The devices
	initially supporting polling are &man.dc.4;, &man.fxp.4;, and
	&man.sis.4;.  More details can be found in the &man.polling.4;
	manual page.</para>
    </sect3>

    <sect3>
      <title>Network Protocols</title>

      <para>&man.bridge.4; now has better support for multiple,
	fully-independent bridging clusters, and is much more stable in
	the presence of dynamic attachments and detatchments.  Full
	support for VLANs is also supported.</para>

      <para>A bug in the IPSec processing for IPv4, which caused the
	inbound SPD checks to be ignored, has been fixed.</para>

      <para>The &man.tcp.4; syncache implementation had a bug that
	could cause kernel panics; this has been fixed.</para>

      <para>The TCP implementation now properly ignores packets
	addressed to IP-layer broadcast addresses.</para>
    </sect3>

    <sect3>
      <title>Disks and Storage</title>

      <para></para>
    </sect3>

    <sect3>
      <title>Filesystems</title>

      <para>A bug was been fixed in soft updates that could cause
	occasional filesystem corruption if the system is shut down
	immediately after performing heavy filesystem activities, such
	as installing a new kernel or other software.</para>
    </sect3>

    <sect3>
      <title>PCCARD Support</title>

      <para></para>
    </sect3>

    <sect3>
      <title>Multimedia Support</title>

      <para arch="i386">The ufm driver, supporting the D-Link DSB-R100
	USB Radio, has been added.</para>
    </sect3>

    <sect3>
      <title>Contributed Software</title>

      <para></para>
    </sect3>
  </sect2>
  <sect2 id="security">
    <title>Security Advisories</title>

    <para>An <quote>off-by-one</quote> bug has been fixed in
      <application>OpenSSH</application>'s multiplexing code.  This bug
      could have allowed a connecting SSH client to execute arbitrary
      code with the privileges of the client user.  (See security
      advisory <ulink
        url="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-02:13.openssh.asc">FreeBSD-SA-02:13</ulink>.)</para>

  </sect2>
  <sect2 id="userland">
    <title>Userland Changes</title>

    <para>&man.ctags.1; no longer creates a corrupt tags file if the
      source file used <literal>//</literal> (C++-style)
      comments.</para>

    <para>&man.dump.8; now supplies progress information in its
      process title, useful for monitoring automated backups.</para>

    <para><filename>/etc/rc.firewall</filename> and
      <filename>/etc/rc.firewall6</filename> will no longer add their own
      hardcoded rules in the cases of a rules file in the
      <varname>firewall_type</varname> variable or a non-existent
      firewall type.  (The motivation for this change is to avoid
      acting on assumptions about a site's firewall policies.)  In
      addition, the <literal>closed</literal> firewall type now works
      as documented in the &man.rc.firewall.8; manual page.</para>

    <para>The functionality of <filename>/etc/security</filename> has
      been been moved into a set of scripts under the &man.periodic.8;
      framework, to make local customization easier and more
      maintainable.  These scripts now reside in
      <filename>/etc/periodic/security/</filename>.</para>

    <para>&man.ldd.1; can now be used on shared libraries, in addition
      to executables.</para>

    <para>&man.ngctl.8; now supports a <option>write</option> command
      to send a data packet down a given hook.</para>

    <para>The <option>-W</option> option to &man.ps.1; (to extract
      information from a specified swap device) has been useless for
      some time; it has been removed.</para>

<!-- Above this line, order userland changes by manpage/variable name-->

    <para>Locales with names of the form <literal>*.EUC</literal> have
      been renamed to the form <literal>*.euc??</literal>.  For
      example, <literal>ja_JP.euc</literal> has become
      <literal>ja_JP.eucJP</literal>.  This improves locale name
      compatability with &os; CURRENT, X11R6, and a number of
      other UNIX versions.</para>

    <sect3>
      <title>Contributed Software</title>

      <para><application>BIND</application> has been updated to
	8.3.1-REL.</para>

      <para><application>bzip2</application> has been updated to
	1.0.2.</para>
    </sect3>

    <sect3>
      <title>Ports/Packages Collection</title>

      <para></para>
    </sect3>
  </sect2>
</sect1>

<sect1>
  <title>Upgrading from previous releases of &os;</title>

  <para>If you're upgrading from a previous release of &os;, you
    generally will have three options:

    <itemizedlist>
      <listitem>
	<para>Using the binary upgrade option of &man.sysinstall.8;.
	  This option is perhaps the quickest, although it presumes
	  that your installation of &os; uses no special compilation
	  options.</para>
      </listitem>
      <listitem>
	<para>Performing a complete reinstall of &os;.  Technically,
	  this is not an upgrading method, and in any case is usually less
	  convenient than a binary upgrade, in that it requires you to
	  manually backup and restore the contents of
	  <filename>/etc</filename>.  However, it may be useful in
	  cases where you want (or need) to change the partitioning of
	  your disks.
      </listitem>
      <listitem>
	<para>From source code in <filename>/usr/src</filename>.  This
	  route is more flexible, but requires more disk space, time,
	  and more technical expertise.  Upgrading from very old
	  versions of &os; may be problematic; in cases like this, it
	  is usually more effective to perform a binary upgrade or a
	  complete reinstall.</para>
      </listitem>
    </itemizedlist>
  </para>

  <para>Please read the <filename>INSTALL.TXT</filename> file for more
    information, preferably <emphasis>before</emphasis> beginning an
    upgrade.  If you are upgrading from source, please be sure to read
    <filename>/usr/src/UPDATING</filename> as well.</para>

  <para>Finally, if you want to use one of various means to track the
    -STABLE or -CURRENT branches of &os;, please be sure to consult
    the <ulink
    url="http://www.FreeBSD.org/handbook/current-stable.html"><quote>-CURRENT
    vs. -STABLE</quote></ulink> section of the <ulink
    url="http://www.FreeBSD.org/handbook/">FreeBSD
    Handbook</ulink>.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
</sect1>

