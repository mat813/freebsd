<articleinfo>
  <title>&os;/&arch; &release.current; Release Notes</title>

  <pubdate>$FreeBSD$</pubdate>

  <corpauthor>The &os; Project</corpauthor>

  <copyright>
    <year>2000</year>
    <year>2001</year>
    <year>2002</year>
    <year>2003</year>
    <year>2004</year>
    <year>2005</year>
    <holder role="mailto:doc@FreeBSD.org">The &os; Documentation Project</holder>
  </copyright>

  <abstract>
    <para>The release notes for &os; &release.current; contain a
      summary of the changes made to the &os; base system since
      &release.prev;.  Both changes for kernel and userland are
      listed, as well as applicable security advisories for the base
      system that were issued since the last release.  Some brief
      remarks on upgrading are also presented.</para>
  </abstract>
</articleinfo>

<sect1 id="intro">
  <title>Introduction</title>

  <para>This document contains the release notes for &os;
    &release.current; on the &arch.print; hardware platform.  It
    describes new features of &os; that have been added (or changed)
    since &release.prev;.  It also provides some notes on upgrading
    from previous versions of &os;.</para>

<![ %release.type.snapshot [

  <para>The &release.type; distribution to which these release notes
    apply represents a point along the &release.branch; development
    branch between &release.prev; and the future &release.next;.  Some
    pre-built, binary &release.type; distributions along this branch
    can be found at <ulink url="&release.url;"></ulink>.</para>

]]>

<![ %release.type.release [

  <para>This distribution of &os; &release.current; is a
    &release.type; distribution.  It can be found at <ulink
    url="&release.url;"></ulink> or any of its mirrors.  More
    information on obtaining this (or other) &release.type;
    distributions of &os; can be found in the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors.html"><quote>Obtaining
    FreeBSD</quote></ulink> appendix in the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
    Handbook</ulink>.</para>

]]>
</sect1>

<!--
	The "What's New" section of the release notes.

	Guidelines for new entries:

	1.  If there is some obvious "keyword" associated with an
	entry (such as a manpage entry or an application name), try to
	put it at the start of the sentence.

	2.  Within each subsection (i.e. kernel, security, userland),
	list items in alphabetical order by these keywords.

	Some entries will have no obvious keywords to help with
	ordering.  In sections containing these entries, put those
	containing (e.g.) manpage references first, then some
	suitable SGML comment line as a demarc, then the remaining
	entries.

-->

<sect1 id="new">
  <title>What's New</title>

  <para>This section describes the most user-visible new or changed
    features in &os; since &release.prev;.  Typical release note items
    document new drivers or hardware support, new commands or options,
    major bugfixes, or contributed software upgrades.  Security
    advisories for the base system that were issued after
    &release.prev; are also listed.</para>

  <sect2 id="security">
    <title>Security Advisories</title>

    <para>Two buffer overflows in the TELNET client program have been
      corrected.  They could have allowed a malicious TELNET server or
      an active network attacker to cause &man.telnet.1; to execute
      arbitrary code with the privileges of the user running it.
      More information can be found in security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:01.telnet.asc">FreeBSD-SA-05:01.telnet</ulink>.
      </para>

    <para>A information disclosure vulnerability in the
      &man.sendfile.2; system call, which could permit it to transmit
      random parts of kernel memory, has been fixed.  More details are
      in security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:02.sendfile.asc">FreeBSD-SA-05:02.sendfile</ulink>.
      </para>

    <para>An information leak vulnerability in the
      <literal>SIOCGIFCONF</literal> &man.ioctl.2;, which leaked 12
      bytes of kernel memory, has been fixed.  More details are in security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:04.ifconf.asc">FreeBSD-SA-05:04.ifconf</ulink>.
      </para>

    <para>Several programming errors in &man.cvs.1;, which could
      potentially cause arbitrary code to be executed on CVS servers,
      have been corrected.  Further information can be found in
      security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:05.cvs.asc">FreeBSD-SA-05:05.cvs</ulink>.
      </para>

    <para>An error in the default permissions on the <filename
	class="devicefile">/dev/iir</filename> device node, which
      allowed unprivileged local users can send commands to the
      hardware supported by the &man.iir.4; driver, has been fixed.
      For more information, see security advisory
      <ulink url="ftp://ftp.freebsd.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:06.iir.asc">FreeBSD-SA-05:06.iir</ulink>.
      </para>

    <para>A bug in the validation of &man.i386.get.ldt.2; system call
      input arguments, which may allow kernel memory may be disclosed
      to the user process, has been fixed.  For more information, see
       security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:07.ldt.asc">FreeBSD-SA-05:07.ldt</ulink>.
      </para>

    <para>Several information disclosure vulnerabilities in various
      parts of the kernel have been fixed.  For more information, see
      security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:08.kmem.asc">FreeBSD-SA-05:08.kmem</ulink>.
      </para>

    <para arch="i386">Because of an information disclosure vulnerability on
      processors using Hyper-Threading Technology (HTT), the
      <varname>machdep.hyperthreading_allowed</varname> sysctl
      variable has been added.  It defaults to <literal>1</literal>
      (HTT enabled) on &os; CURRENT, and <literal>0</literal> (HTT
      disabled) on the 4-STABLE and 5-STABLE development branches and
      supported security fix branches.  More information can be found
      in security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:09.htt.asc">FreeBSD-SA-05:09.htt</ulink>.
      </para>

    <para>Two problems in the &man.gzip.1; utility have been fixed.
      These may allow a local user to modify permissions
      of arbitrary files and overwrite arbitrary local
      files when uncompressing a file.
      For more information, see security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:11.gzip.asc">FreeBSD-SA-05:11.gzip</ulink>.
      </para>

    <para>Two security-related problems have been fixed in
      &man.bzip2.1;.  These include a potential denial of service and
      unauthorized manipulation of file permissions.  For more
      information, see security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:14.bzip2.asc">FreeBSD-SA-05:14.bzip2</ulink>.
      </para>

    <para>Two problems in &os;'s TCP stack have been fixed.  They
      could allow attackers to stall existing TCP connections,
      creating a denial-of-service situation.  More information is
      contained in security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-05:15.tcp.asc">FreeBSD-SA-05:15.tcp</ulink>.
      </para>

    <para>A bug in the smbfs file system, which could allow an
      attacker to escape out of &man.chroot.2 environments on an smbfs
      mounted filesystem, has been fixed.  For more details, see
      security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-06:16.smbfs.asc">FreeBSD-SA-06:16.smbfs</ulink>.</para>

    <para>A potential denial of service problem in &man.sendmail.8;
      caused by excessive recursion which leads to stack
      exhaustion when attempting delivery of a malformed
      MIME message, has been fixed.  For more details,
      see security advisory <ulink
      url="http://security.FreeBSD.org/advisories/FreeBSD-SA-06:17.sendmail.asc">FreeBSD-SA-06:17.sendmail</ulink>.</para>

    <para>A potential buffer overflow condition in &man.sppp.4; has
      been corrected.  For more details, see security advisory
      <ulink url="http://security.FreeBSD.org/advisories/FreeBSD-SA-06:18.ppp.asc">FreeBSD-SA-06:18.ppp</ulink>.</para>
  </sect2>

  <sect2 id="kernel">
    <title>Kernel Changes</title>

    <para></para>

<!-- Above this line, kernel changes ordered by manpage/variable name -->

    <sect3 id="proc">
      <title>Platform-Specific Hardware Support</title>

      <para arch="i386,pc98">The &man.ce.4; driver has been added to
        support Cronyx Tau32-PCI adapters.
        </para>

      <para></para>

    </sect3>

    <sect3 id="boot">
      <title>Boot Loader Changes</title>

      <para></para>

<!-- Above this line, order boot loader changes by manpage/variable name-->

    </sect3>

    <sect3 id="net-if">
      <title>Network Interface Support</title>

      <para arch="i386">The &man.bce.4; driver, which supports Broadcom
	NetXtreme II (BCM5706/BCM5708) PCI/PCIe Gigabit Ethernet controllers,
	has been added.  Unlike the versions of this driver in newer
	&os; releases, this version does not support jumbo frames or
	hardware VLAN tagging.  For more details, see &man.bce.4;.</para>

<!-- Above this line, order network driver changes by manpage/variable name-->

    </sect3>

    <sect3 id="net-proto">
      <title>Network Protocols</title>

      <para></para>

    </sect3>

    <sect3 id="disks">
      <title>Disks and Storage</title>

      <para>The mfi driver, which supports
	the LSI MegaRAID SAS controller family, has been added.
	Unlike versions of this driver included with newer &os;
	releases, this version does not include the Linux
	&man.ioctl.2; layer.</para>

      <para>The &man.mpt.4; driver has been updated to a version from
	&os; &os.current;.  This brings support for FC target mode,
	SAS HBAs, and U320 negotiations.</para>

    </sect3>

    <sect3 id="fs">
      <title>File Systems</title>

      <para></para>

    </sect3>

    <sect3 id="pccard">
      <title>PCCARD Support</title>

      <para></para>

    </sect3>

    <sect3 id="mm">
      <title>Multimedia Support</title>

      <para></para>

    </sect3>
  </sect2>

  <sect2 id="userland">
    <title>Userland Changes</title>

    <para>The &man.getaddrinfo.3; function now queries <literal>A</literal>
      DNS resource records before <literal>AAAA</literal> records
      when <literal>AF_UNSPEC</literal> is specified.
      Some broken DNS servers return <literal>NXDOMAIN</literal>
      against non-existent <literal>AAAA</literal> queries,
      even when it should return <literal>NOERROR</literal>
      with empty return records.  This is a problem for an IPv4/IPv6 dual
      stack node because the <literal>NXDOMAIN</literal> returned
      by the first query of an <literal>AAAA</literal> record makes
      the querying server stop attempting to resolve the <literal>A</literal>
      record if any.  Also, this behavior has been recognized as a potential
      denial-of-service attack (see <ulink url="http://www.kb.cert.org/vuls/id/714121"></ulink>
      for more details).
      Note that although the query order has been changed,
      the returned result still includes
      <literal>AF_INET6</literal> records before
      <literal>AF_INET</literal> records.</para>

    <para>&man.sed.1; now supports a <option>-l</option> option to
      make its output line-buffered.</para>

<!-- Above this line, order userland changes by manpage/variable name-->

  </sect2>

  <sect2 id="contrib">
    <title>Contributed Software</title>

    <para><application>sendmail</application> has been updated from
      version 8.13.1 to version 8.13.8.</para>

    <para></para>

  </sect2>

  <sect2 id="ports">
    <title>Ports/Packages Collection Infrastructure</title>

    <para></para>

  </sect2>

  <sect2 id="releng">
    <title>Release Engineering and Integration</title>

    <para></para>

  </sect2>
</sect1>

<sect1 id="upgrade">
  <title>Upgrading from previous releases of &os;</title>

  <para>If you're upgrading from a previous release of &os;, you
    generally will have three options:

    <itemizedlist>
      <listitem>
	<para>Using the binary upgrade option of &man.sysinstall.8;.
	  This option is perhaps the quickest, although it presumes
	  that your installation of &os; uses no special compilation
	  options.</para>
      </listitem>
      <listitem>
	<para>Performing a complete reinstall of &os;.  Technically,
	  this is not an upgrading method, and in any case is usually less
	  convenient than a binary upgrade, in that it requires you to
	  manually backup and restore the contents of
	  <filename>/etc</filename>.  However, it may be useful in
	  cases where you want (or need) to change the partitioning of
	  your disks.
      </listitem>
      <listitem>
	<para>From source code in <filename>/usr/src</filename>.  This
	  route is more flexible, but requires more disk space, time,
	  and technical expertise.  More information can be found
	  in the <ulink
	  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/makeworld.html"><quote>Using
	  <command>make world</command></quote></ulink> section of the <ulink
	  url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
	  Handbook</ulink>.  Upgrading from very old
	  versions of &os; may be problematic; in cases like this, it
	  is usually more effective to perform a binary upgrade or a
	  complete reinstall.</para>
      </listitem>
    </itemizedlist>
  </para>

  <para>Please read the <filename>INSTALL.TXT</filename> file for more
    information, preferably <emphasis>before</emphasis> beginning an
    upgrade.  If you are upgrading from source, please be sure to read
    <filename>/usr/src/UPDATING</filename> as well.</para>

  <para>Finally, if you want to use one of various means to track the
    -STABLE or -CURRENT branches of &os;, please be sure to consult
    the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/current-stable.html"><quote>-CURRENT
    vs. -STABLE</quote></ulink> section of the <ulink
    url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD
    Handbook</ulink>.</para>

  <important>
    <para>Upgrading &os; should, of course, only be attempted after
      backing up <emphasis>all</emphasis> data and configuration
      files.</para>
  </important>
</sect1>
